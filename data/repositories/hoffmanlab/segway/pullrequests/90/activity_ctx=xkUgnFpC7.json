{"pagelen": 50, "values": [{"update": {"description": "Addresses Issue #128\r\n\r\nCurrently observation files are specified from the main Segway process to segway-task.\r\n\r\nThey were being submitted based on the main Segway process\u2019s temporary directory had filenames that started with \u201c/tmp/\u2026\u201d. When attempting to concatenate to path objects with the specified \u201c/tmp/\u2026\u201d, since there was the root \u201c/\u201d it would ignore the temporary directory prefix specifed by segway-task. This was only true of the observation files themselves and not the observation list files specifying the files. Some files were being cleaned up \\(based on segway-task\u2019s temporary current working directory\\) while others were not.\r\n\r\nThe following changes were made to address the issues around temporary observation files:\r\n\r\n1. Observation files, including their names, are solely specified in the segway-task process.\r\n2. All observation files are now all created using mkstemp which includes \u2018O\\_EXCL\u2019 access \\(available on NFS\\) and a secure naming scheme as not to interfere with other processes in case multiple processes are using the same genomic window. No special environment TMPDIR should be necessary \\(from segway-wrapper\\) but is probably still worth keeping.\r\n3. File exceptions are allowed to be raised during file creation or closure \\(e.g. quota issues on NFS\\)\r\n4. All observation files created in this manner are removed after the task is completed or it runs into an exception.\r\n5. All this observation file handling was refactored out and shared across the tasks so all tasks should have the same functionality.\r\n\r\nThe user's `TMPDIR` environment variable will still be the root for where observation files are created since it is set specifically by `segway-wrapper.sh` which spawns segway-task.\r\n\r\nIn `segway-wrapper.sh` as well there is some consideration for removing dead code but may be kept to be extra cautious, but the for loop inside the exit handler, `on_exit`, does nothing:\r\n\r\n        # delete any arguments that begin with $submit_tmpdir\r\n        for arg in \"$@\"; do\r\n            if [[ \"$arg\" == \"$submit_tmpdir\"* ]]; then\r\n                rm -rf \"$TMPDIR\" 2>/dev/null || true\r\n            fi\r\n        done\r\n\r\nThe `$submit_tmpdir` is the parent process Segway's tmpdir. No arguments are supplied \\(in `$@`\\) since the command being run is the script created in the cmdline folder which takes no arguments.\r\n\r\nAfter finishing review, the tests will need to be updated for the cmdline/details/log differences since observation arguments have either been removed or have a different naming scheme \\(no longer based on window ID\\).\r\n\r\n\u200c", "title": "Fix observation files being temporarly and securely created in segway task", "destination": {"commit": {"hash": "50c798f683cf", "type": "commit", "links": {"self": {"href": "data/repositories/hoffmanlab/segway/commit/50c798f683cf.json"}, "html": {"href": "#!/hoffmanlab/segway/commits/50c798f683cf"}}}, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "62cf67db3a1e", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ericr86/segway/commit/62cf67db3a1e"}, "html": {"href": "https://bitbucket.org/ericr86/segway/commits/62cf67db3a1e"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ericr86/segway"}, "html": {"href": "https://bitbucket.org/ericr86/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{e4afec35-c393-4c1b-9d35-155fcd95ef33}ts=python"}}, "type": "repository", "name": "segway", "full_name": "ericr86/segway", "uuid": "{e4afec35-c393-4c1b-9d35-155fcd95ef33}"}, "branch": {"name": "temporary-observation-files"}}, "state": "OPEN", "author": {"display_name": "Eric Roberts", "uuid": "{cd8c1fe0-28ca-45fb-8ef9-48090b42bb80}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D"}, "html": {"href": "https://bitbucket.org/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/17548d71dfb29d015b880f48cfc01ca3d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsER-5.png"}}, "nickname": "ericr86", "type": "user", "account_id": "557058:c80ca578-03a1-4ac6-b3ee-50372a3fceee"}, "date": "2018-07-13T12:59:45.211265+00:00"}, "pull_request": {"type": "pullrequest", "id": 90, "links": {"self": {"href": "data/repositories/hoffmanlab/segway/pullrequests/90.json"}, "html": {"href": "#!/hoffmanlab/segway/pull-requests/90"}}, "title": "Fix observation files being temporarly and securely created in segway task"}}, {"update": {"description": "Addresses Issue #128\r\n\r\nCurrently observation files are specified from the main Segway process to segway-task.\r\n\r\nThey were being submitted based on the main Segway process\u2019s temporary directory had filenames that started with \u201c/tmp/\u2026\u201d. When attempting to concatenate to path objects with the specified \u201c/tmp/\u2026\u201d, since there was the root \u201c/\u201d it would ignore the temporary directory prefix specifed by segway-task. This was only true of the observation files themselves and not the observation list files specifying the files. Some files were being cleaned up \\(based on segway-task\u2019s temporary current working directory\\) while others were not.\r\n\r\nThe following changes were made to address the issues around temporary observation files:\r\n\r\n1. Observation files, including their names, are solely specified in the segway-task process.\r\n2. All observation files are now all created using mkstemp which includes \u2018O\\_EXCL\u2019 access \\(available on NFS\\) and a secure naming scheme as not to interfere with other processes in case multiple processes are using the same genomic window. No special environment TMPDIR should be necessary \\(from segway-wrapper\\) but is probably still worth keeping.\r\n3. File exceptions are allowed to be raised during file creation or closure \\(e.g. quota issues on NFS\\)\r\n4. All observation files created in this manner are removed after the task is completed or it runs into an exception.\r\n5. All this observation file handling was refactored out and shared across the tasks so all tasks should have the same functionality.\r\n\r\nThe user's `TMPDIR` environment variable will still be the root for where observation files are created since it is set specifically by `segway-wrapper.sh` which spawns segway-task.\r\n\r\nIn `segway-wrapper.sh` as well there is some consideration for removing dead code but may be kept to be extra cautious, but essential the for loop inside the exit handler, `on_exit`, does nothing:\r\n\r\n        # delete any arguments that begin with $submit_tmpdir\r\n        for arg in \"$@\"; do\r\n            if [[ \"$arg\" == \"$submit_tmpdir\"* ]]; then\r\n                rm -rf \"$TMPDIR\" 2>/dev/null || true\r\n            fi\r\n        done\r\n\r\nThe `$submit_tmpdir` is the parent process Segway's tmpdir. No arguments are supplied \\(in `$@`\\) since the command being run is the script created in the cmdline folder which takes no arguments.\r\n\r\nAfter finishing review, the tests will need to be updated for the cmdline/details/log differences since observation arguments have either been removed or have a different naming scheme \\(no longer based on window ID\\).\r\n\r\n\u200c", "title": "Fix observation files being temporarly and securely created in segway task", "destination": {"commit": {"hash": "50c798f683cf", "type": "commit", "links": {"self": {"href": "data/repositories/hoffmanlab/segway/commit/50c798f683cf.json"}, "html": {"href": "#!/hoffmanlab/segway/commits/50c798f683cf"}}}, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "62cf67db3a1e", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ericr86/segway/commit/62cf67db3a1e"}, "html": {"href": "https://bitbucket.org/ericr86/segway/commits/62cf67db3a1e"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ericr86/segway"}, "html": {"href": "https://bitbucket.org/ericr86/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{e4afec35-c393-4c1b-9d35-155fcd95ef33}ts=python"}}, "type": "repository", "name": "segway", "full_name": "ericr86/segway", "uuid": "{e4afec35-c393-4c1b-9d35-155fcd95ef33}"}, "branch": {"name": "temporary-observation-files"}}, "state": "OPEN", "author": {"display_name": "Eric Roberts", "uuid": "{cd8c1fe0-28ca-45fb-8ef9-48090b42bb80}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D"}, "html": {"href": "https://bitbucket.org/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/17548d71dfb29d015b880f48cfc01ca3d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsER-5.png"}}, "nickname": "ericr86", "type": "user", "account_id": "557058:c80ca578-03a1-4ac6-b3ee-50372a3fceee"}, "date": "2018-07-13T12:54:47.587613+00:00"}, "pull_request": {"type": "pullrequest", "id": 90, "links": {"self": {"href": "data/repositories/hoffmanlab/segway/pullrequests/90.json"}, "html": {"href": "#!/hoffmanlab/segway/pull-requests/90"}}, "title": "Fix observation files being temporarly and securely created in segway task"}}, {"update": {"description": "Currently observation files are specified from the main Segway process to segway-task.\r\n\r\nThey were being submitted based on the main Segway process\u2019s temporary directory had filenames that started with \u201c/tmp/\u2026\u201d. When attempting to concatenate to path objects with the specified \u201c/tmp/\u2026\u201d, since there was the root \u201c/\u201d it would ignore the temporary directory prefix specifed by segway-task. This was only true of the observation files themselves and not the observation list files specifying the files. Some files were being cleaned up \\(based on segway-task\u2019s temporary current working directory\\) while others were not.\r\n\r\nThe following changes were made to address the issues around temporary observation files:\r\n\r\n1. Observation files, including their names, are solely specified in the segway-task process.\r\n2. All observation files are now all created using mkstemp which includes \u2018O\\_EXCL\u2019 access \\(available on NFS\\) and a secure naming scheme as not to interfere with other processes in case multiple processes are using the same genomic window. No special environment TMPDIR should be necessary \\(from segway-wrapper\\) but is probably still worth keeping.\r\n3. File exceptions are allowed to be raised during file creation or closure \\(e.g. quota issues on NFS\\)\r\n4. All observation files created in this manner are removed after the task is completed or it runs into an exception.\r\n5. All this observation file handling was refactored out and shared across the tasks so all tasks should have the same functionality.\r\n\r\nThe user's `TMPDIR` environment variable will still be the root for where observation files are created since it is set specifically by `segway-wrapper.sh` which spawns segway-task.\r\n\r\nAfter finishing review, the tests will need to be updated for the cmdline/details/log differences since observation arguments have either been removed or have a different naming scheme \\(no longer based on window ID\\).\r\n\r\nAddresses Issue #128", "title": "Fix observation files being temporarly and securely created in segway task", "destination": {"commit": {"hash": "50c798f683cf", "type": "commit", "links": {"self": {"href": "data/repositories/hoffmanlab/segway/commit/50c798f683cf.json"}, "html": {"href": "#!/hoffmanlab/segway/commits/50c798f683cf"}}}, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "62cf67db3a1e", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ericr86/segway/commit/62cf67db3a1e"}, "html": {"href": "https://bitbucket.org/ericr86/segway/commits/62cf67db3a1e"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ericr86/segway"}, "html": {"href": "https://bitbucket.org/ericr86/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{e4afec35-c393-4c1b-9d35-155fcd95ef33}ts=python"}}, "type": "repository", "name": "segway", "full_name": "ericr86/segway", "uuid": "{e4afec35-c393-4c1b-9d35-155fcd95ef33}"}, "branch": {"name": "temporary-observation-files"}}, "state": "OPEN", "author": {"display_name": "Eric Roberts", "uuid": "{cd8c1fe0-28ca-45fb-8ef9-48090b42bb80}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D"}, "html": {"href": "https://bitbucket.org/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/17548d71dfb29d015b880f48cfc01ca3d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsER-5.png"}}, "nickname": "ericr86", "type": "user", "account_id": "557058:c80ca578-03a1-4ac6-b3ee-50372a3fceee"}, "date": "2018-07-12T19:50:07.146264+00:00"}, "pull_request": {"type": "pullrequest", "id": 90, "links": {"self": {"href": "data/repositories/hoffmanlab/segway/pullrequests/90.json"}, "html": {"href": "#!/hoffmanlab/segway/pull-requests/90"}}, "title": "Fix observation files being temporarly and securely created in segway task"}}, {"update": {"description": "Currently observation files are specified from the main Segway process to segway-task.\r\n\r\nThey were being submitted based on the main Segway process\u2019s temporary directory had filenames that started with \u201c/tmp/\u2026\u201d. When attempting to concatenate to path objects with the specified \u201c/tmp/\u2026\u201d, since there was the root \u201c/\u201d it would ignore the temporary directory prefix specifed by segway-task. This was only true of the observation files themselves and not the observation list files specifying the files. Some files were being cleaned up \\(based on segway-task\u2019s temporary current working directory\\) while others were not.\r\n\r\nThe following changes were made to address the issues around temporary observation files:\r\n\r\n1. Observation files, including their names, are solely specified in the segway-task process.\r\n2. All observation files are now all created using mkstemp which includes \u2018O\\_EXCL\u2019 access \\(available on NFS\\) and a secure naming scheme as not to interfere with other processes in case multiple processes are using the same genomic window. No special environment TMPDIR should be necessary \\(from segway-wrapper\\) but is probably still worth keeping.\r\n3. File exceptions are allowed to be raised during file creation or closure \\(e.g. quota issues on NFS\\)\r\n4. All observation files created in this manner are removed after the task is completed or it runs into an exception.\r\n5. All this observation file handling was refactored out and shared across the tasks so all tasks should have the same functionality.\r\n\r\nThe user's `TMPDIR` environment variable will still be the root for where observation files are created since it is set specifically by `segway-wrapper.sh` which spawns segway-task.\r\n\r\nAfter finishing review, the tests will need to be updated for the cmdline/details/log differences since observation arguments have either been removed or have a different naming scheme \\(no longer based on window ID\\).", "title": "Fix observation files being temporarly and securely created in segway task", "destination": {"commit": {"hash": "50c798f683cf", "type": "commit", "links": {"self": {"href": "data/repositories/hoffmanlab/segway/commit/50c798f683cf.json"}, "html": {"href": "#!/hoffmanlab/segway/commits/50c798f683cf"}}}, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "62cf67db3a1e", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ericr86/segway/commit/62cf67db3a1e"}, "html": {"href": "https://bitbucket.org/ericr86/segway/commits/62cf67db3a1e"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ericr86/segway"}, "html": {"href": "https://bitbucket.org/ericr86/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{e4afec35-c393-4c1b-9d35-155fcd95ef33}ts=python"}}, "type": "repository", "name": "segway", "full_name": "ericr86/segway", "uuid": "{e4afec35-c393-4c1b-9d35-155fcd95ef33}"}, "branch": {"name": "temporary-observation-files"}}, "state": "OPEN", "author": {"display_name": "Eric Roberts", "uuid": "{cd8c1fe0-28ca-45fb-8ef9-48090b42bb80}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D"}, "html": {"href": "https://bitbucket.org/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/17548d71dfb29d015b880f48cfc01ca3d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsER-5.png"}}, "nickname": "ericr86", "type": "user", "account_id": "557058:c80ca578-03a1-4ac6-b3ee-50372a3fceee"}, "date": "2018-07-12T19:47:30.722562+00:00"}, "pull_request": {"type": "pullrequest", "id": 90, "links": {"self": {"href": "data/repositories/hoffmanlab/segway/pullrequests/90.json"}, "html": {"href": "#!/hoffmanlab/segway/pull-requests/90"}}, "title": "Fix observation files being temporarly and securely created in segway task"}}, {"update": {"description": "Currently observation files are specified from the main Segway process to segway-task.\r\n\r\nThey were being submitted based on the main Segway process\u2019s temporary directory had filenames that started with \u201c/tmp/\u2026\u201d. When attempting to concatenate to path objects with the specified \u201c/tmp/\u2026\u201d, since there was the root \u201c/\u201d it would ignore the temporary directory prefix specifed by segway-task. This was only true of the observation files themselves and not the observation list files specifying the files. Some files were being cleaned up \\(based on segway-task\u2019s temporary current working directory\\) while others were not.\r\n\r\nThe following changes were made to address the issues around temporary observation files:\r\n\r\n1. Observation files, including their names, are solely specified in the segway-task process.\r\n2. All observation files are now all created using mkstemp which includes \u2018O\\_EXCL\u2019 access \\(available on NFS\\) and a secure naming scheme as not to interfere with other processes in case multiple processes are using the same genomic window. No special environment TMPDIR should be necessary \\(from segway-wrapper\\) but is probably still worth keeping.\r\n3. File exceptions are allowed to be raised during file creation or closure \\(e.g. quota issues on NFS\\)\r\n4. All observation files created in this manner are removed after the task is completed or it runs into an exception.\r\n5. All this observation file handling was refactored out and shared across the tasks so all tasks should have the same functionality.\r\n\r\nAs a notable side effect, the use of a user's TMPDIR environment variable should be irrelevant now to how the observation files are created since it is set specifically by 'segway-wrapper.sh\\` which spawns segway-task. The only way TMPDIR could possibly be set is if somehow `bash` is somehow aliased in a users environment to specifically source/change that particular variable. By default, spawning bash to run segway task should neither be interactive \\(.bashrc\\) or login \\(.bash\\_profile\\).\r\n\r\nAfter finishing review, the tests will need to be updated for the cmdline/details/log differences since observation arguments have either been removed or have a different naming scheme \\(no longer based on window ID\\).", "title": "Fix observation files being temporarly and securely created in segway task", "destination": {"commit": {"hash": "50c798f683cf", "type": "commit", "links": {"self": {"href": "data/repositories/hoffmanlab/segway/commit/50c798f683cf.json"}, "html": {"href": "#!/hoffmanlab/segway/commits/50c798f683cf"}}}, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "62cf67db3a1e", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ericr86/segway/commit/62cf67db3a1e"}, "html": {"href": "https://bitbucket.org/ericr86/segway/commits/62cf67db3a1e"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ericr86/segway"}, "html": {"href": "https://bitbucket.org/ericr86/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{e4afec35-c393-4c1b-9d35-155fcd95ef33}ts=python"}}, "type": "repository", "name": "segway", "full_name": "ericr86/segway", "uuid": "{e4afec35-c393-4c1b-9d35-155fcd95ef33}"}, "branch": {"name": "temporary-observation-files"}}, "state": "OPEN", "author": {"display_name": "Eric Roberts", "uuid": "{cd8c1fe0-28ca-45fb-8ef9-48090b42bb80}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D"}, "html": {"href": "https://bitbucket.org/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/17548d71dfb29d015b880f48cfc01ca3d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsER-5.png"}}, "nickname": "ericr86", "type": "user", "account_id": "557058:c80ca578-03a1-4ac6-b3ee-50372a3fceee"}, "date": "2018-07-12T19:42:21.934128+00:00"}, "pull_request": {"type": "pullrequest", "id": 90, "links": {"self": {"href": "data/repositories/hoffmanlab/segway/pullrequests/90.json"}, "html": {"href": "#!/hoffmanlab/segway/pull-requests/90"}}, "title": "Fix observation files being temporarly and securely created in segway task"}}, {"update": {"description": "Currently observation files are specified from the main Segway process to segway-task.\r\n\r\nThey were being submitted based on the main Segway process\u2019s temporary directory had filenames that started with \u201c/tmp/\u2026\u201d. When attempting to concatenate to path objects with the specified \u201c/tmp/\u2026\u201d, since there was the root \u201c/\u201d it would ignore the temporary directory prefix specifed by segway-task. This was only true of the observation files themselves and not the observation list files specifying the files. Some files were being cleaned up \\(based on segway-task\u2019s temporary current working directory\\) while others were not.\r\n\r\nThe following changes were made to address the issues around temporary observation files:\r\n\r\n1. Observation files, including their names, are solely specified in the segway-task process.\r\n2. All observation files are now all created using mkstemp which includes \u2018O\\_EXCL\u2019 access \\(available on NFS\\) and a secure naming scheme as not to interfere with other processes in case multiple processes are using the same genomic window. No special environment  TMPDIR should be necessary \\(from segway-wrapper\\) but is probably still worth keeping.\r\n3. File exceptions are allowed to be raised during file creation or closure \\(e.g. quota issues on NFS\\)\r\n4. All observation files created in this manner are removed after the task is completed or it runs into an exception.\r\n5. All this observation file handling was refactored out and shared across the tasks so all tasks should have the same functionality.\r\n\r\nAfter finishing review, the tests will need to be updated for the cmdline/details/log differences since observation arguments have either been removed or have a different naming scheme \\(no longer based on window ID\\).", "title": "Fix observation files being temporarly and securely created in segway task", "destination": {"commit": {"hash": "50c798f683cf", "type": "commit", "links": {"self": {"href": "data/repositories/hoffmanlab/segway/commit/50c798f683cf.json"}, "html": {"href": "#!/hoffmanlab/segway/commits/50c798f683cf"}}}, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "62cf67db3a1e", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ericr86/segway/commit/62cf67db3a1e"}, "html": {"href": "https://bitbucket.org/ericr86/segway/commits/62cf67db3a1e"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ericr86/segway"}, "html": {"href": "https://bitbucket.org/ericr86/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{e4afec35-c393-4c1b-9d35-155fcd95ef33}ts=python"}}, "type": "repository", "name": "segway", "full_name": "ericr86/segway", "uuid": "{e4afec35-c393-4c1b-9d35-155fcd95ef33}"}, "branch": {"name": "temporary-observation-files"}}, "state": "OPEN", "author": {"display_name": "Eric Roberts", "uuid": "{cd8c1fe0-28ca-45fb-8ef9-48090b42bb80}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D"}, "html": {"href": "https://bitbucket.org/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/17548d71dfb29d015b880f48cfc01ca3d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsER-5.png"}}, "nickname": "ericr86", "type": "user", "account_id": "557058:c80ca578-03a1-4ac6-b3ee-50372a3fceee"}, "date": "2018-07-12T19:02:00.182795+00:00"}, "pull_request": {"type": "pullrequest", "id": 90, "links": {"self": {"href": "data/repositories/hoffmanlab/segway/pullrequests/90.json"}, "html": {"href": "#!/hoffmanlab/segway/pull-requests/90"}}, "title": "Fix observation files being temporarly and securely created in segway task"}}, {"update": {"description": "Currently observation files are specified from the main Segway process to segway-task.\r\n\r\nThey were being submitted based on the main Segway process\u2019s temporary directory had filenames that started with \u201c/tmp/\u2026\u201d. When attempting to concatenate to path objects with the specified \u201c/tmp/\u2026\u201d, since there was the root \u201c/\u201d it would ignore the temporary directory prefix specifed by segway-task. This was only true of the observation files themselves and not the observation list files specifying the files. Some files were being cleaned up \\(based on segway-task\u2019s temporary current working directory\\) while others were not.\r\n\r\nThe following changes were made to address the issues around temporary observation files:\r\n\r\n1. Observation files, including their names, are solely specified in the segway-task process.\r\n2. All observation files are now all created using mkstemp which includes \u2018O\\_EXCL\u2019 access \\(available on NFS\\) and a secure naming scheme as not to interfere with other processes in case multiple processes are using the same genomic window. No special environment  TMPDIR should be necessary \\(from segway-wrapper\\) but is probably still worth keeping.\r\n3. File exceptions are allowed to be raised during file creation or closure \\(e.g. quota issues on NFS\\)\r\n4. All observation files created in this manner are removed after the task is completed or it runs into an exception.\r\n5. All this observation file handling was refactored out and shared across the tasks so all tasks should have the same functionality.\r\n\r\nAfter finishing review, the tests will need to be updated for the cmdline/details/log differences since observation arguments have either been removed or have a different naming scheme \\(no longer based on window ID\\).", "title": "Fix observation files being temporarly and securely created in segway task", "destination": {"commit": {"hash": "50c798f683cf", "type": "commit", "links": {"self": {"href": "data/repositories/hoffmanlab/segway/commit/50c798f683cf.json"}, "html": {"href": "#!/hoffmanlab/segway/commits/50c798f683cf"}}}, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "62cf67db3a1e", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ericr86/segway/commit/62cf67db3a1e"}, "html": {"href": "https://bitbucket.org/ericr86/segway/commits/62cf67db3a1e"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/ericr86/segway"}, "html": {"href": "https://bitbucket.org/ericr86/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{e4afec35-c393-4c1b-9d35-155fcd95ef33}ts=python"}}, "type": "repository", "name": "segway", "full_name": "ericr86/segway", "uuid": "{e4afec35-c393-4c1b-9d35-155fcd95ef33}"}, "branch": {"name": "temporary-observation-files"}}, "state": "OPEN", "author": {"display_name": "Eric Roberts", "uuid": "{cd8c1fe0-28ca-45fb-8ef9-48090b42bb80}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D"}, "html": {"href": "https://bitbucket.org/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/17548d71dfb29d015b880f48cfc01ca3d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsER-5.png"}}, "nickname": "ericr86", "type": "user", "account_id": "557058:c80ca578-03a1-4ac6-b3ee-50372a3fceee"}, "date": "2018-07-12T19:02:00.117438+00:00"}, "pull_request": {"type": "pullrequest", "id": 90, "links": {"self": {"href": "data/repositories/hoffmanlab/segway/pullrequests/90.json"}, "html": {"href": "#!/hoffmanlab/segway/pull-requests/90"}}, "title": "Fix observation files being temporarly and securely created in segway task"}}]}