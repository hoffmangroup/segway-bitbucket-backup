{"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/54/comments/25327329.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/54#comment-25327329"}}, "issue": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/54.json"}}, "type": "issue", "id": 54, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "title": "Tests assume undefined $TMPDIR to run correctly"}, "content": {"raw": "These tests will fail locally if you set TMPDIR to any directory before running.\n\nIn the case of a cluster this means that if they set the environment for where temporary files are stored by setting TMPDIR the tests will also fail.\n\nSpecifically what happens is run.sh ends up setting the TMPDIR to test-datehere.XXXXXX which segway-wrapper then uses as a base directory for \"segway.XXXXXXXXXX\".\n\nYou end up with the error:\n```shell\nmktemp: failed to create directory via template `./test-20160115.0ZOwWB/segway.XXXXXXXXXX': No such file or directory\n```\n\nbecause the current working directory is test-datehere.XXXXXX for when the test runs. From looking at run.sh, it looks like it was not supposed to set TMPDIR to be used in segway because there's no explicit export.", "markup": "markdown", "html": "<p>These tests will fail locally if you set TMPDIR to any directory before running.</p>\n<p>In the case of a cluster this means that if they set the environment for where temporary files are stored by setting TMPDIR the tests will also fail.</p>\n<p>Specifically what happens is run.sh ends up setting the TMPDIR to test-datehere.XXXXXX which segway-wrapper then uses as a base directory for \"segway.XXXXXXXXXX\".</p>\n<p>You end up with the error:</p>\n<div class=\"codehilite language-shell\"><pre><span></span>mktemp: failed to create directory via template <span class=\"sb\">`</span>./test-20160115.0ZOwWB/segway.XXXXXXXXXX<span class=\"err\">&#39;</span>: No such file or directory\n</pre></div>\n\n\n<p>because the current working directory is test-datehere.XXXXXX for when the test runs. From looking at run.sh, it looks like it was not supposed to set TMPDIR to be used in segway because there's no explicit export.</p>", "type": "rendered"}, "created_on": "2016-02-08T13:56:00.566112+00:00", "user": {"display_name": "Eric Roberts", "uuid": "{cd8c1fe0-28ca-45fb-8ef9-48090b42bb80}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D"}, "html": {"href": "https://bitbucket.org/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/17548d71dfb29d015b880f48cfc01ca3d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsER-5.png"}}, "nickname": "ericr86", "type": "user", "account_id": "557058:c80ca578-03a1-4ac6-b3ee-50372a3fceee"}, "updated_on": "2016-02-08T13:58:26.609102+00:00", "type": "issue_comment", "id": 25327329}