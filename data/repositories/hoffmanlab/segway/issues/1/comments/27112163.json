{"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/1/comments/27112163.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/1#comment-27112163"}}, "issue": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/1.json"}}, "type": "issue", "id": 1, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "title": "Error creating input.master"}, "content": {"raw": "From segway-users:\n\nWhen I specify the \"--prior-strength\" and \"--segtransition-weight-scale\u201d options, it throws an exception and produces a zero-byte params/input.master file. Segway runs fine on the same dataset if I do not specify these options. The problem seems independent of the value specified. My full command is:\n\nsegway train 'segmentation/output/genomedata/mydataset_mm10.genomedata' 'segmentation/output/segway_param_search/mydataset_0.4000_7/train.mydataset'  --ruler=100 --resolution 10 --num-labels 15 --cluster-opt '-q short -W 3:59 -m blades -R \"span[hosts=1]\"' --seg-table='segmentation/segtable.txt' --mem-usage='8,16,24,32,48,64,96,144' --minibatch-num-windows=10 --max-train-rounds=50 --prior-strength=0.4 --segtransition-weight-scale=7\n\nOutput:\n```shell\nTraceback (most recent call last):\n File \"/home/av84w/local/python27/bin/segway\", line 9, in <module>\n   load_entry_point('segway==1.3.3.dev0', 'console_scripts', 'segway')()\n File \"/home/av84w/local/python27/lib/python2.7/site-packages/segway/run.py\", line 2863, in main\n   return runner()\n File \"/home/av84w/local/python27/lib/python2.7/site-packages/segway/run.py\", line 2666, in __call__\n   self.run(*args, **kwargs)\n File \"/home/av84w/local/python27/lib/python2.7/site-packages/segway/run.py\", line 2632, in run\n   self.run_train()\n File \"/home/av84w/local/python27/lib/python2.7/site-packages/segway/run.py\", line 2171, in run_train\n   dst_filenames = self.setup_train()\n File \"/home/av84w/local/python27/lib/python2.7/site-packages/segway/run.py\", line 2134, in setup_train\n   self.params_dirpath, self.clobber)\n File \"/home/av84w/local/python27/lib/python2.7/site-packages/segway/_util.py\", line 150, in __call__\n   *args, **kwargs)\n File \"/home/av84w/local/python27/lib/python2.7/site-packages/segway/_util.py\", line 471, in save_template\n   save_substituted_resource(filename, resource, mapping)\n File \"/home/av84w/local/python27/lib/python2.7/site-packages/segway/_util.py\", line 454, in save_substituted_resource\n   text = tmpl.substitute(mapping)\n File \"/home/av84w/local/python27/lib/python2.7/string.py\", line 176, in substitute\n   return self.pattern.sub(convert, self.template)\n File \"/home/av84w/local/python27/lib/python2.7/string.py\", line 169, in convert\n   return '%s' % (val,)\n File \"/home/av84w/local/python27/lib/python2.7/site-packages/segway/input_master.py\", line 236, in __str__\n   return make_spec(self.type_name, self.generate_objects())\n File \"/home/av84w/local/python27/lib/python2.7/site-packages/segway/input_master.py\", line 79, in make_spec\n   items = list(iterable)\n File \"/home/av84w/local/python27/lib/python2.7/site-packages/segway/input_master.py\", line 483, in generate_objects\n   dirichlet_table = self.make_dirichlet_table()\n File \"/home/av84w/local/python27/lib/python2.7/site-packages/segway/input_master.py\", line 467, in make_dirichlet_table\n   probs = self.make_dense_cpt_segCountDown_seg_segTransition()\nAttributeError: 'DirichletTabParamSpec' object has no attribute \u2018make_dense_cpt_segCountDown_seg_segTransition'\n```", "markup": "markdown", "html": "<p>From segway-users:</p>\n<p>When I specify the \"--prior-strength\" and \"--segtransition-weight-scale\u201d options, it throws an exception and produces a zero-byte params/input.master file. Segway runs fine on the same dataset if I do not specify these options. The problem seems independent of the value specified. My full command is:</p>\n<p>segway train 'segmentation/output/genomedata/mydataset_mm10.genomedata' 'segmentation/output/segway_param_search/mydataset_0.4000_7/train.mydataset'  --ruler=100 --resolution 10 --num-labels 15 --cluster-opt '-q short -W 3:59 -m blades -R \"span[hosts=1]\"' --seg-table='segmentation/segtable.txt' --mem-usage='8,16,24,32,48,64,96,144' --minibatch-num-windows=10 --max-train-rounds=50 --prior-strength=0.4 --segtransition-weight-scale=7</p>\n<p>Output:</p>\n<div class=\"codehilite language-shell\"><pre><span></span>Traceback <span class=\"o\">(</span>most recent call last<span class=\"o\">)</span>:\n File <span class=\"s2\">&quot;/home/av84w/local/python27/bin/segway&quot;</span>, line <span class=\"m\">9</span>, in &lt;module&gt;\n   load_entry_point<span class=\"o\">(</span><span class=\"s1\">&#39;segway==1.3.3.dev0&#39;</span>, <span class=\"s1\">&#39;console_scripts&#39;</span>, <span class=\"s1\">&#39;segway&#39;</span><span class=\"o\">)()</span>\n File <span class=\"s2\">&quot;/home/av84w/local/python27/lib/python2.7/site-packages/segway/run.py&quot;</span>, line <span class=\"m\">2863</span>, in main\n   <span class=\"k\">return</span> runner<span class=\"o\">()</span>\n File <span class=\"s2\">&quot;/home/av84w/local/python27/lib/python2.7/site-packages/segway/run.py&quot;</span>, line <span class=\"m\">2666</span>, in __call__\n   self.run<span class=\"o\">(</span>*args, **kwargs<span class=\"o\">)</span>\n File <span class=\"s2\">&quot;/home/av84w/local/python27/lib/python2.7/site-packages/segway/run.py&quot;</span>, line <span class=\"m\">2632</span>, in run\n   self.run_train<span class=\"o\">()</span>\n File <span class=\"s2\">&quot;/home/av84w/local/python27/lib/python2.7/site-packages/segway/run.py&quot;</span>, line <span class=\"m\">2171</span>, in run_train\n   <span class=\"nv\">dst_filenames</span> <span class=\"o\">=</span> self.setup_train<span class=\"o\">()</span>\n File <span class=\"s2\">&quot;/home/av84w/local/python27/lib/python2.7/site-packages/segway/run.py&quot;</span>, line <span class=\"m\">2134</span>, in setup_train\n   self.params_dirpath, self.clobber<span class=\"o\">)</span>\n File <span class=\"s2\">&quot;/home/av84w/local/python27/lib/python2.7/site-packages/segway/_util.py&quot;</span>, line <span class=\"m\">150</span>, in __call__\n   *args, **kwargs<span class=\"o\">)</span>\n File <span class=\"s2\">&quot;/home/av84w/local/python27/lib/python2.7/site-packages/segway/_util.py&quot;</span>, line <span class=\"m\">471</span>, in save_template\n   save_substituted_resource<span class=\"o\">(</span>filename, resource, mapping<span class=\"o\">)</span>\n File <span class=\"s2\">&quot;/home/av84w/local/python27/lib/python2.7/site-packages/segway/_util.py&quot;</span>, line <span class=\"m\">454</span>, in save_substituted_resource\n   <span class=\"nv\">text</span> <span class=\"o\">=</span> tmpl.substitute<span class=\"o\">(</span>mapping<span class=\"o\">)</span>\n File <span class=\"s2\">&quot;/home/av84w/local/python27/lib/python2.7/string.py&quot;</span>, line <span class=\"m\">176</span>, in substitute\n   <span class=\"k\">return</span> self.pattern.sub<span class=\"o\">(</span>convert, self.template<span class=\"o\">)</span>\n File <span class=\"s2\">&quot;/home/av84w/local/python27/lib/python2.7/string.py&quot;</span>, line <span class=\"m\">169</span>, in convert\n   <span class=\"k\">return</span> <span class=\"s1\">&#39;%s&#39;</span> % <span class=\"o\">(</span>val,<span class=\"o\">)</span>\n File <span class=\"s2\">&quot;/home/av84w/local/python27/lib/python2.7/site-packages/segway/input_master.py&quot;</span>, line <span class=\"m\">236</span>, in __str__\n   <span class=\"k\">return</span> make_spec<span class=\"o\">(</span>self.type_name, self.generate_objects<span class=\"o\">())</span>\n File <span class=\"s2\">&quot;/home/av84w/local/python27/lib/python2.7/site-packages/segway/input_master.py&quot;</span>, line <span class=\"m\">79</span>, in make_spec\n   <span class=\"nv\">items</span> <span class=\"o\">=</span> list<span class=\"o\">(</span>iterable<span class=\"o\">)</span>\n File <span class=\"s2\">&quot;/home/av84w/local/python27/lib/python2.7/site-packages/segway/input_master.py&quot;</span>, line <span class=\"m\">483</span>, in generate_objects\n   <span class=\"nv\">dirichlet_table</span> <span class=\"o\">=</span> self.make_dirichlet_table<span class=\"o\">()</span>\n File <span class=\"s2\">&quot;/home/av84w/local/python27/lib/python2.7/site-packages/segway/input_master.py&quot;</span>, line <span class=\"m\">467</span>, in make_dirichlet_table\n   <span class=\"nv\">probs</span> <span class=\"o\">=</span> self.make_dense_cpt_segCountDown_seg_segTransition<span class=\"o\">()</span>\nAttributeError: <span class=\"s1\">&#39;DirichletTabParamSpec&#39;</span> object has no attribute \u2018make_dense_cpt_segCountDown_seg_segTransition<span class=\"err\">&#39;</span>\n</pre></div>", "type": "rendered"}, "created_on": "2016-04-19T13:57:57.627081+00:00", "user": {"display_name": "Eric Roberts", "uuid": "{cd8c1fe0-28ca-45fb-8ef9-48090b42bb80}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D"}, "html": {"href": "https://bitbucket.org/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/17548d71dfb29d015b880f48cfc01ca3d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsER-5.png"}}, "nickname": "ericr86", "type": "user", "account_id": "557058:c80ca578-03a1-4ac6-b3ee-50372a3fceee"}, "updated_on": "2016-04-19T13:58:24.823311+00:00", "type": "issue_comment", "id": 27112163}