{"priority": "critical", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "links": {"attachments": {"href": "data/repositories/hoffmanlab/segway/issues/60/attachments_page=1.json"}, "self": {"href": "data/repositories/hoffmanlab/segway/issues/60.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/hoffmanlab/segway/issues/60/watch"}, "comments": {"href": "data/repositories/hoffmanlab/segway/issues/60/comments_page=1.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/60/segway-process-uses-too-much-memory"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/hoffmanlab/segway/issues/60/vote"}}, "reporter": {"display_name": "Eric Roberts", "uuid": "{cd8c1fe0-28ca-45fb-8ef9-48090b42bb80}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D"}, "html": {"href": "https://bitbucket.org/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/17548d71dfb29d015b880f48cfc01ca3d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsER-5.png"}}, "nickname": "ericr86", "type": "user", "account_id": "557058:c80ca578-03a1-4ac6-b3ee-50372a3fceee"}, "title": "Segway process uses too much memory", "component": null, "votes": 0, "watches": 1, "content": {"raw": "The segway process (and not the jobs it spawns) is taking up a significant amount of memory for longer running jobs. The memory usage increases the longer segway is running and submitting jobs.\r\n\r\nHere is an example of memory usage from top on an SGE Cluster:\r\n```shell\r\n21824 rachelc   20   0 47.3g  45g 9948 S  1.0 36.5  88:02.21 segway\r\n```\r\nWhere 47.3 gigs is the virtual memory given to the process and 45g is the resident set size of the process.\r\n\r\nMemory (python) profiling information was injected into the process to find out the following using guppy and pyringe:\r\n\r\n```shell\r\n>>> inject('print >>sys.stderr, guppy_hpy.heap()')\r\n\r\n==> pid:[21824] #threads:[11] current thread:[139643938924288]\r\n\r\nPartition of a set of 747222 objects. Total size = 113102584 bytes.\r\n\r\nIndex  Count   %     Size   % Cumulative  % Kind (class / dict of class)\r\n\r\n     0 387984  52 48701888  43  48701888  43 unicode\r\n\r\n     1   8273   1  8670104   8  57371992  51 dict of segway.cluster.RestartableJob\r\n\r\n     2   8273   1  8670104   8  66042096  58 dict of segway.cluster.sge.JobTemplateFactory\r\n\r\n     3  79033  11  7895136   7  73937232  65 str\r\n\r\n     4  13812   2  5983520   5  79920752  71 list\r\n\r\n     5  17297   2  5808536   5  85729288  76 dict (no owner)\r\n\r\n     6  69421   9  5518848   5  91248136  81 tuple\r\n\r\n     7  20018   3  5167344   5  96415480  85 path.path\r\n\r\n     8  16546   2  2382624   2  98798104  87 0x312e480\r\n\r\n     9   8273   1  2316440   2 101114544  89 dict of drmaa.session.JobTemplate\r\n\r\n<349 more rows. Type e.g. '_.more' to view.>\r\n\r\n \r\n\r\n>>> inject('print >>sys.stderr, guppy_hpy.heap()[0].byvia')\r\n\r\n==> pid:[21824] #threads:[11] current thread:[139643938924288]\r\n\r\nPartition of a set of 387939 objects. Total size = 48696176 bytes.\r\n\r\nIndex  Count   %     Size   % Cumulative  % Referred Via:\r\n\r\n     0   8280   2  4566200   9   4566200   9 '[6]'\r\n\r\n     1   8280   2  2845808   6   7412008  15 '[54]'\r\n\r\n     2   8280   2  2708536   6  10120544  21 '[50]'\r\n\r\n     3   8280   2  2647320   5  12767864  26 '[46]'\r\n\r\n     4   8279   2  2647256   5  15415120  32 '[42]'\r\n\r\n     5   8280   2  2581136   5  17996256  37 '[48]'\r\n\r\n     6   8278   2  2581040   5  20577296  42 '[18]'\r\n\r\n     7   8280   2  2515000   5  23092296  47 '[26]'\r\n\r\n     8   8280   2  2448824   5  25541120  52 '[52]'\r\n\r\n     9   8289   2  1324488   3  26865608  55 '[0]'\r\n\r\n<3663 more rows. Type e.g. '_.more' to view.>\r\n\r\n \r\n\r\n>>> inject('print >>sys.stderr, guppy_hpy.heap()[0].byrcs')\r\n\r\n==> pid:[21824] #threads:[11] current thread:[139643938924288]\r\n\r\nPartition of a set of 387622 objects. Total size = 48655880 bytes.\r\n\r\nIndex  Count   %     Size   % Cumulative  % Referrers by Kind (class / dict of class)\r\n\r\n     0 374216  97 47173576  97  47173576  97 list\r\n\r\n     1   8265   2   925680   2  48099256  99 dict of segway.cluster.sge.JobTemplateFactory\r\n\r\n     2    786   0   255264   1  48354520  99 dict (no owner)\r\n\r\n     3   2577   1   164928   0  48519448 100 list, segway.cluster.RestartableJobDict\r\n\r\n     4   1649   0   105536   0  48624984 100 segway.cluster.RestartableJobDict\r\n\r\n     5     21   0    21264   0  48646248 100 function, tuple\r\n\r\n     6     37   0     2152   0  48648400 100 tuple\r\n\r\n     7     11   0     1848   0  48650248 100 dict of type\r\n\r\n     8     20   0     1520   0  48651768 100 drmaa.session.JobInfo\r\n\r\n     9      7   0     1368   0  48653136 100 dict of module\r\n\r\n<9 more rows. Type e.g. '_.more' to view.>\r\n\r\n \r\n\r\n>>> inject('print >>sys.stderr, guppy_hpy.heap()[0].byrcs[0].byvia')\r\n\r\n==> pid:[21824] #threads:[11] current thread:[139643938924288]\r\n\r\nPartition of a set of 374039 objects. Total size = 47151000 bytes.\r\n\r\nIndex  Count   %     Size   % Cumulative  % Referred Via:\r\n\r\n     0   8268   2  4560568  10   4560568  10 '[6]'\r\n\r\n     1   8270   2  2842368   6   7402936  16 '[54]'\r\n\r\n     2   8270   2  2705248   6  10108184  21 '[50]'\r\n\r\n     3   8270   2  2644120   6  12752304  27 '[46]'\r\n\r\n     4   8269   2  2644056   6  15396360  33 '[42]'\r\n\r\n     5   8270   2  2578016   5  17974376  38 '[48]'\r\n\r\n     6   8268   2  2577920   5  20552296  44 '[18]'\r\n\r\n     7   8270   2  2511960   5  23064256  49 '[26]'\r\n\r\n     8   8270   2  2445864   5  25510120  54 '[52]'\r\n\r\n     9   8268   2  1322208   3  26832328  57 '[0]'\r\n\r\n<517 more rows. Type e.g. '_.more' to view.>\r\n\r\n \r\n\r\n>>> inject('print >>sys.stderr, guppy_hpy.heap()[0].byrcs[0].byrcs')\r\n\r\n==> pid:[21824] #threads:[11] current thread:[139643938924288]\r\n\r\nPartition of a set of 373686 objects. Total size = 47105912 bytes.\r\n\r\nIndex  Count   %     Size   % Cumulative  % Referrers by Kind (class / dict of class)\r\n\r\n     0 373686 100 47105912 100  47105912 100 list\r\n\r\n \r\n\r\n>>> inject('print >>sys.stderr, guppy_hpy.heapu()')\r\n\r\n==> pid:[21824] #threads:[11] current thread:[139643938924288]\r\n\r\nData from unreachable objects.\r\n\r\nPartition of a set of 905 objects. Total size = 317792 bytes.\r\n\r\nIndex  Count   %     Size   % Cumulative  % Class\r\n\r\n     0    108  12   215328  68    215328  68 dict\r\n\r\n     1     40   4    34880  11    250208  79 type\r\n\r\n     2    104  11    14656   5    264864  83 list\r\n\r\n     3    155  17    12920   4    277784  87 str\r\n\r\n     4    125  14    12528   4    290312  91 tuple\r\n\r\n     5    144  16    11520   4    301832  95 __builtin__.wrapper_descriptor\r\n\r\n     6     53   6     3816   1    305648  96 types.MemberDescriptorType\r\n\r\n     7     51   6     3672   1    309320  97 __builtin__.method_descriptor\r\n\r\n     8     35   4     2520   1    311840  98 types.BuiltinFunctionType\r\n\r\n     9     19   2     1368   0    313208  99 types.GetSetDescriptorType\r\n\r\n<42 more rows. Type e.g. '_.more' to view.>\r\n\r\n \r\n\r\n>>> inject('print >>sys.stderr, guppy_hpy.heap().byclodo')\r\n\r\n==> pid:[21824] #threads:[11] current thread:[139643938924288]\r\n\r\nPartition of a set of 746177 objects. Total size = 112935584 bytes.\r\n\r\nIndex  Count   %     Size   % Cumulative  % Kind (class / dict of class)\r\n\r\n     0 387171  52 48598408  43  48598408  43 unicode\r\n\r\n     1   8255   1  8651240   8  57249648  51 dict of segway.cluster.RestartableJob\r\n\r\n     2   8255   1  8651240   8  65900888  58 dict of segway.cluster.sge.JobTemplateFactory\r\n\r\n     3  79035  11  7895784   7  73796672  65 str\r\n\r\n     4  13790   2  5972464   5  79769136  71 list\r\n\r\n     5  17279   2  5805800   5  85574936  76 dict (no owner)\r\n\r\n     6  69375   9  5515384   5  91090320  81 tuple\r\n\r\n     7  19982   3  5157728   5  96248048  85 path.path\r\n\r\n     8  16510   2  2377440   2  98625488  87 0x312e480\r\n\r\n     9   8255   1  2311400   2 100936888  89 dict of drmaa.session.JobTemplate\r\n\r\n<355 more rows. Type e.g. '_.more' to view.>\r\n\r\n \r\n\r\n>>> inject('print >>sys.stderr, guppy_hpy.heap().byid')\r\n\r\n==> pid:[21824] #threads:[11] current thread:[139643938924288]\r\n\r\nSet of 745706 <mixed> objects. Total size = 112859584 bytes.\r\n\r\nIndex     Size   %   Cumulative  %   Brief\r\n\r\n     0    98600   0.1     98600   0.1 segway.cluster.RestartableJobDict: 0x7ef57e1f0bc0\r\n\r\n     1    98600   0.1    197200   0.2 segway.cluster.RestartableJobDict: 0x7efa7a9a2bc0\r\n\r\n     2    98584   0.1    295784   0.3 dict (no owner): 0x2f3aba0*843\r\n\r\n     3    49448   0.0    345232   0.3 segway.cluster.RestartableJobDict: 0x7ef552d98fc0\r\n\r\n     4    49448   0.0    394680   0.3 segway.cluster.RestartableJobDict: 0x7ef55b9b13c0\r\n\r\n     5    49448   0.0    444128   0.4 segway.cluster.RestartableJobDict: 0x7ef562907ba0\r\n\r\n     6    49448   0.0    493576   0.4 segway.cluster.RestartableJobDict: 0x7ef571e837c0\r\n\r\n     7    49448   0.0    543024   0.5 segway.cluster.RestartableJobDict: 0x7ef5749199b0\r\n\r\n     8    49448   0.0    592472   0.5 segway.cluster.RestartableJobDict: 0x7ef578db32f0\r\n\r\n     9    49448   0.0    641920   0.6 segway.cluster.RestartableJobDict: 0x7ef595e1a400\r\n\r\n<745696 more rows. Type e.g. '_.more' to view.>\r\n\r\n \r\n\r\n>>> inject('print >>sys.stderr, guppy_hpy.heap().byrcs')\r\n\r\n==> pid:[21824] #threads:[11] current thread:[139643938924288]\r\n\r\nPartition of a set of 745653 objects. Total size = 112849664 bytes.\r\n\r\nIndex  Count   %     Size   % Cumulative  % Referrers by Kind (class / dict of class)\r\n\r\n     0 423460  57 51153360  45  51153360  45 list\r\n\r\n     1  57946   8 11533632  10  62686992  56 dict of segway.cluster.sge.JobTemplateFactory\r\n\r\n     2   8247   1  8642856   8  71329848  63 segway.cluster.RestartableJob\r\n\r\n     3   8247   1  8642856   8  79972704  71 segway.cluster.sge.JobTemplateFactory\r\n\r\n     4  45260   6  4468840   4  84441544  75 types.CodeType\r\n\r\n     5   8247   1  2309160   2  86750704  77 0x312e480, dict (no owner)\r\n\r\n     6   8247   1  2309160   2  89059864  79 0x312eb10\r\n\r\n     7   8247   1  2309160   2  91369024  81 drmaa.session.JobTemplate\r\n\r\n     8  51241   7  1960096   2  93329120  83 tuple\r\n\r\n     9  16544   2  1899344   2  95228464  84 dict (no owner)\r\n\r\n<1372 more rows. Type e.g. '_.more' to view.>\r\n\r\n \r\n\r\n>>> inject('print >>sys.stderr, guppy_hpy.heap().byrcs[0].byid')\r\n\r\n==> pid:[21824] #threads:[11] current thread:[139643938924288]\r\n\r\nSet of 422945 <mixed> objects. Total size = 51089632 bytes.\r\n\r\nIndex     Size   %   Cumulative  %   Brief\r\n\r\n     0     3352   0.0      3352   0.0 dict (no owner): 0x2cee9f0*24\r\n\r\n     1     3352   0.0      6704   0.0 dict (no owner): 0x2cef1e0*24\r\n\r\n     2     3352   0.0     10056   0.0 dict (no owner): 0x2cef300*24\r\n\r\n     3     3352   0.0     13408   0.0 dict (no owner): 0x2cef550*24\r\n\r\n     4     3352   0.0     16760   0.0 dict (no owner): 0x2cf4be0*24\r\n\r\n     5     3352   0.0     20112   0.0 dict (no owner): 0x2cf5b90*24\r\n\r\n     6     3352   0.0     23464   0.0 dict (no owner): 0x2cf6b40*24\r\n\r\n     7     3352   0.0     26816   0.1 dict (no owner): 0x2cf7af0*24\r\n\r\n     8     3352   0.0     30168   0.1 dict (no owner): 0x2cf7e90*24\r\n\r\n     9     3352   0.0     33520   0.1 dict (no owner): 0x2cf8230*24\r\n\r\n<422935 more rows. Type e.g. '_.more' to view.>\r\n\r\n \r\n\r\n>>> inject('print >>sys.stderr, guppy_hpy.heap().byrcs[0].theone')\r\n\r\n==> pid:[21824] #threads:[11] current thread:[139643938924288]\r\n\r\nPartition of a set of 747342 objects. Total size = 113121328 bytes.\r\n\r\nIndex  Count   %     Size   % Cumulative  % Kind (class / dict of class)\r\n\r\n     0 388073  52 48713320  43  48713320  43 unicode\r\n\r\n     1   8275   1  8672200   8  57385520  51 dict of segway.cluster.RestartableJob\r\n\r\n     2   8275   1  8672200   8  66057720  58 dict of segway.cluster.sge.JobTemplateFactory\r\n\r\n     3  79031  11  7895000   7  73952720  65 str\r\n\r\n     4  13814   2  5984752   5  79937472  71 list\r\n\r\n     5  17295   2  5807976   5  85745448  76 dict (no owner)\r\n\r\n     6  69428   9  5519344   5  91264792  81 tuple\r\n\r\n     7  20022   3  5168432   5  96433224  85 path.path\r\n\r\n     8  16550   2  2383200   2  98816424  87 0x312e480\r\n\r\n     9   8275   1  2317000   2 101133424  89 dict of drmaa.session.JobTemplate\r\n\r\n<349 more rows. Type e.g. '_.more' to view.>\r\n\r\nTraceback (most recent call last):\r\n\r\n \r\n\r\n  File \"<string>\", line 1, in <module>\r\n\r\n  File \"/mnt/work1/users/home2/rachelc/.local/lib/python2.7/site-packages/guppy/heapy/UniSet.py\", line 602, in <lambda>\r\n\r\n    theone = property(lambda self: self.fam.get_theone(self), doc=\"\"\"\\\r\n\r\n  File \"/mnt/work1/users/home2/rachelc/.local/lib/python2.7/site-packages/guppy/heapy/UniSet.py\", line 1784, in get_theone\r\n\r\n    raise ValueError, 'theone requires a singleton set'\r\n\r\nValueError: theone requires a singleton set\r\n```\r\n\r\nGuppy documentation is incredibly difficult to come by especially with the syntax used. It is essentially a declarative domain specific language to select information about the python memory of a given program. Notably `.heap()` returns a selection of the entire Python heap reachable by python objects and `.heapu()` return the heap of unreachable python objects (that should be garbage collected). It is the heap itself that shows there is an unreasonable amount of unicode objects taking up a significant amount of memory. `byrcs` selects on the heap or part of the heap and organizes by \"referrers by kind (class)\". `byvia` does the something similar except it shows where the objects are being referred via.\r\n\r\nFrom the preliminary data it looks like there is a massive list (of a list?) of unicode objects. Presumably this list grows the longer segway runs.\r\n", "markup": "markdown", "html": "<p>The segway process (and not the jobs it spawns) is taking up a significant amount of memory for longer running jobs. The memory usage increases the longer segway is running and submitting jobs.</p>\n<p>Here is an example of memory usage from top on an SGE Cluster:</p>\n<div class=\"codehilite language-shell\"><pre><span></span><span class=\"m\">21824</span> rachelc   <span class=\"m\">20</span>   <span class=\"m\">0</span> <span class=\"m\">47</span>.3g  45g <span class=\"m\">9948</span> S  <span class=\"m\">1</span>.0 <span class=\"m\">36</span>.5  <span class=\"m\">88</span>:02.21 segway\n</pre></div>\n\n\n<p>Where 47.3 gigs is the virtual memory given to the process and 45g is the resident set size of the process.</p>\n<p>Memory (python) profiling information was injected into the process to find out the following using guppy and pyringe:</p>\n<div class=\"codehilite language-shell\"><pre><span></span>&gt;&gt;&gt; inject<span class=\"o\">(</span><span class=\"s1\">&#39;print &gt;&gt;sys.stderr, guppy_hpy.heap()&#39;</span><span class=\"o\">)</span>\n\n<span class=\"o\">==</span>&gt; pid:<span class=\"o\">[</span><span class=\"m\">21824</span><span class=\"o\">]</span> <span class=\"c1\">#threads:[11] current thread:[139643938924288]</span>\n\nPartition of a <span class=\"nb\">set</span> of <span class=\"m\">747222</span> objects. Total <span class=\"nv\">size</span> <span class=\"o\">=</span> <span class=\"m\">113102584</span> bytes.\n\nIndex  Count   %     Size   % Cumulative  % Kind <span class=\"o\">(</span>class / dict of class<span class=\"o\">)</span>\n\n     <span class=\"m\">0</span> <span class=\"m\">387984</span>  <span class=\"m\">52</span> <span class=\"m\">48701888</span>  <span class=\"m\">43</span>  <span class=\"m\">48701888</span>  <span class=\"m\">43</span> unicode\n\n     <span class=\"m\">1</span>   <span class=\"m\">8273</span>   <span class=\"m\">1</span>  <span class=\"m\">8670104</span>   <span class=\"m\">8</span>  <span class=\"m\">57371992</span>  <span class=\"m\">51</span> dict of segway.cluster.RestartableJob\n\n     <span class=\"m\">2</span>   <span class=\"m\">8273</span>   <span class=\"m\">1</span>  <span class=\"m\">8670104</span>   <span class=\"m\">8</span>  <span class=\"m\">66042096</span>  <span class=\"m\">58</span> dict of segway.cluster.sge.JobTemplateFactory\n\n     <span class=\"m\">3</span>  <span class=\"m\">79033</span>  <span class=\"m\">11</span>  <span class=\"m\">7895136</span>   <span class=\"m\">7</span>  <span class=\"m\">73937232</span>  <span class=\"m\">65</span> str\n\n     <span class=\"m\">4</span>  <span class=\"m\">13812</span>   <span class=\"m\">2</span>  <span class=\"m\">5983520</span>   <span class=\"m\">5</span>  <span class=\"m\">79920752</span>  <span class=\"m\">71</span> list\n\n     <span class=\"m\">5</span>  <span class=\"m\">17297</span>   <span class=\"m\">2</span>  <span class=\"m\">5808536</span>   <span class=\"m\">5</span>  <span class=\"m\">85729288</span>  <span class=\"m\">76</span> dict <span class=\"o\">(</span>no owner<span class=\"o\">)</span>\n\n     <span class=\"m\">6</span>  <span class=\"m\">69421</span>   <span class=\"m\">9</span>  <span class=\"m\">5518848</span>   <span class=\"m\">5</span>  <span class=\"m\">91248136</span>  <span class=\"m\">81</span> tuple\n\n     <span class=\"m\">7</span>  <span class=\"m\">20018</span>   <span class=\"m\">3</span>  <span class=\"m\">5167344</span>   <span class=\"m\">5</span>  <span class=\"m\">96415480</span>  <span class=\"m\">85</span> path.path\n\n     <span class=\"m\">8</span>  <span class=\"m\">16546</span>   <span class=\"m\">2</span>  <span class=\"m\">2382624</span>   <span class=\"m\">2</span>  <span class=\"m\">98798104</span>  <span class=\"m\">87</span> 0x312e480\n\n     <span class=\"m\">9</span>   <span class=\"m\">8273</span>   <span class=\"m\">1</span>  <span class=\"m\">2316440</span>   <span class=\"m\">2</span> <span class=\"m\">101114544</span>  <span class=\"m\">89</span> dict of drmaa.session.JobTemplate\n\n&lt;<span class=\"m\">349</span> more rows. Type e.g. <span class=\"s1\">&#39;_.more&#39;</span> to view.&gt;\n\n\n\n&gt;&gt;&gt; inject<span class=\"o\">(</span><span class=\"s1\">&#39;print &gt;&gt;sys.stderr, guppy_hpy.heap()[0].byvia&#39;</span><span class=\"o\">)</span>\n\n<span class=\"o\">==</span>&gt; pid:<span class=\"o\">[</span><span class=\"m\">21824</span><span class=\"o\">]</span> <span class=\"c1\">#threads:[11] current thread:[139643938924288]</span>\n\nPartition of a <span class=\"nb\">set</span> of <span class=\"m\">387939</span> objects. Total <span class=\"nv\">size</span> <span class=\"o\">=</span> <span class=\"m\">48696176</span> bytes.\n\nIndex  Count   %     Size   % Cumulative  % Referred Via:\n\n     <span class=\"m\">0</span>   <span class=\"m\">8280</span>   <span class=\"m\">2</span>  <span class=\"m\">4566200</span>   <span class=\"m\">9</span>   <span class=\"m\">4566200</span>   <span class=\"m\">9</span> <span class=\"s1\">&#39;[6]&#39;</span>\n\n     <span class=\"m\">1</span>   <span class=\"m\">8280</span>   <span class=\"m\">2</span>  <span class=\"m\">2845808</span>   <span class=\"m\">6</span>   <span class=\"m\">7412008</span>  <span class=\"m\">15</span> <span class=\"s1\">&#39;[54]&#39;</span>\n\n     <span class=\"m\">2</span>   <span class=\"m\">8280</span>   <span class=\"m\">2</span>  <span class=\"m\">2708536</span>   <span class=\"m\">6</span>  <span class=\"m\">10120544</span>  <span class=\"m\">21</span> <span class=\"s1\">&#39;[50]&#39;</span>\n\n     <span class=\"m\">3</span>   <span class=\"m\">8280</span>   <span class=\"m\">2</span>  <span class=\"m\">2647320</span>   <span class=\"m\">5</span>  <span class=\"m\">12767864</span>  <span class=\"m\">26</span> <span class=\"s1\">&#39;[46]&#39;</span>\n\n     <span class=\"m\">4</span>   <span class=\"m\">8279</span>   <span class=\"m\">2</span>  <span class=\"m\">2647256</span>   <span class=\"m\">5</span>  <span class=\"m\">15415120</span>  <span class=\"m\">32</span> <span class=\"s1\">&#39;[42]&#39;</span>\n\n     <span class=\"m\">5</span>   <span class=\"m\">8280</span>   <span class=\"m\">2</span>  <span class=\"m\">2581136</span>   <span class=\"m\">5</span>  <span class=\"m\">17996256</span>  <span class=\"m\">37</span> <span class=\"s1\">&#39;[48]&#39;</span>\n\n     <span class=\"m\">6</span>   <span class=\"m\">8278</span>   <span class=\"m\">2</span>  <span class=\"m\">2581040</span>   <span class=\"m\">5</span>  <span class=\"m\">20577296</span>  <span class=\"m\">42</span> <span class=\"s1\">&#39;[18]&#39;</span>\n\n     <span class=\"m\">7</span>   <span class=\"m\">8280</span>   <span class=\"m\">2</span>  <span class=\"m\">2515000</span>   <span class=\"m\">5</span>  <span class=\"m\">23092296</span>  <span class=\"m\">47</span> <span class=\"s1\">&#39;[26]&#39;</span>\n\n     <span class=\"m\">8</span>   <span class=\"m\">8280</span>   <span class=\"m\">2</span>  <span class=\"m\">2448824</span>   <span class=\"m\">5</span>  <span class=\"m\">25541120</span>  <span class=\"m\">52</span> <span class=\"s1\">&#39;[52]&#39;</span>\n\n     <span class=\"m\">9</span>   <span class=\"m\">8289</span>   <span class=\"m\">2</span>  <span class=\"m\">1324488</span>   <span class=\"m\">3</span>  <span class=\"m\">26865608</span>  <span class=\"m\">55</span> <span class=\"s1\">&#39;[0]&#39;</span>\n\n&lt;<span class=\"m\">3663</span> more rows. Type e.g. <span class=\"s1\">&#39;_.more&#39;</span> to view.&gt;\n\n\n\n&gt;&gt;&gt; inject<span class=\"o\">(</span><span class=\"s1\">&#39;print &gt;&gt;sys.stderr, guppy_hpy.heap()[0].byrcs&#39;</span><span class=\"o\">)</span>\n\n<span class=\"o\">==</span>&gt; pid:<span class=\"o\">[</span><span class=\"m\">21824</span><span class=\"o\">]</span> <span class=\"c1\">#threads:[11] current thread:[139643938924288]</span>\n\nPartition of a <span class=\"nb\">set</span> of <span class=\"m\">387622</span> objects. Total <span class=\"nv\">size</span> <span class=\"o\">=</span> <span class=\"m\">48655880</span> bytes.\n\nIndex  Count   %     Size   % Cumulative  % Referrers by Kind <span class=\"o\">(</span>class / dict of class<span class=\"o\">)</span>\n\n     <span class=\"m\">0</span> <span class=\"m\">374216</span>  <span class=\"m\">97</span> <span class=\"m\">47173576</span>  <span class=\"m\">97</span>  <span class=\"m\">47173576</span>  <span class=\"m\">97</span> list\n\n     <span class=\"m\">1</span>   <span class=\"m\">8265</span>   <span class=\"m\">2</span>   <span class=\"m\">925680</span>   <span class=\"m\">2</span>  <span class=\"m\">48099256</span>  <span class=\"m\">99</span> dict of segway.cluster.sge.JobTemplateFactory\n\n     <span class=\"m\">2</span>    <span class=\"m\">786</span>   <span class=\"m\">0</span>   <span class=\"m\">255264</span>   <span class=\"m\">1</span>  <span class=\"m\">48354520</span>  <span class=\"m\">99</span> dict <span class=\"o\">(</span>no owner<span class=\"o\">)</span>\n\n     <span class=\"m\">3</span>   <span class=\"m\">2577</span>   <span class=\"m\">1</span>   <span class=\"m\">164928</span>   <span class=\"m\">0</span>  <span class=\"m\">48519448</span> <span class=\"m\">100</span> list, segway.cluster.RestartableJobDict\n\n     <span class=\"m\">4</span>   <span class=\"m\">1649</span>   <span class=\"m\">0</span>   <span class=\"m\">105536</span>   <span class=\"m\">0</span>  <span class=\"m\">48624984</span> <span class=\"m\">100</span> segway.cluster.RestartableJobDict\n\n     <span class=\"m\">5</span>     <span class=\"m\">21</span>   <span class=\"m\">0</span>    <span class=\"m\">21264</span>   <span class=\"m\">0</span>  <span class=\"m\">48646248</span> <span class=\"m\">100</span> <span class=\"k\">function</span>, tuple\n\n     <span class=\"m\">6</span>     <span class=\"m\">37</span>   <span class=\"m\">0</span>     <span class=\"m\">2152</span>   <span class=\"m\">0</span>  <span class=\"m\">48648400</span> <span class=\"m\">100</span> tuple\n\n     <span class=\"m\">7</span>     <span class=\"m\">11</span>   <span class=\"m\">0</span>     <span class=\"m\">1848</span>   <span class=\"m\">0</span>  <span class=\"m\">48650248</span> <span class=\"m\">100</span> dict of <span class=\"nb\">type</span>\n\n     <span class=\"m\">8</span>     <span class=\"m\">20</span>   <span class=\"m\">0</span>     <span class=\"m\">1520</span>   <span class=\"m\">0</span>  <span class=\"m\">48651768</span> <span class=\"m\">100</span> drmaa.session.JobInfo\n\n     <span class=\"m\">9</span>      <span class=\"m\">7</span>   <span class=\"m\">0</span>     <span class=\"m\">1368</span>   <span class=\"m\">0</span>  <span class=\"m\">48653136</span> <span class=\"m\">100</span> dict of module\n\n&lt;<span class=\"m\">9</span> more rows. Type e.g. <span class=\"s1\">&#39;_.more&#39;</span> to view.&gt;\n\n\n\n&gt;&gt;&gt; inject<span class=\"o\">(</span><span class=\"s1\">&#39;print &gt;&gt;sys.stderr, guppy_hpy.heap()[0].byrcs[0].byvia&#39;</span><span class=\"o\">)</span>\n\n<span class=\"o\">==</span>&gt; pid:<span class=\"o\">[</span><span class=\"m\">21824</span><span class=\"o\">]</span> <span class=\"c1\">#threads:[11] current thread:[139643938924288]</span>\n\nPartition of a <span class=\"nb\">set</span> of <span class=\"m\">374039</span> objects. Total <span class=\"nv\">size</span> <span class=\"o\">=</span> <span class=\"m\">47151000</span> bytes.\n\nIndex  Count   %     Size   % Cumulative  % Referred Via:\n\n     <span class=\"m\">0</span>   <span class=\"m\">8268</span>   <span class=\"m\">2</span>  <span class=\"m\">4560568</span>  <span class=\"m\">10</span>   <span class=\"m\">4560568</span>  <span class=\"m\">10</span> <span class=\"s1\">&#39;[6]&#39;</span>\n\n     <span class=\"m\">1</span>   <span class=\"m\">8270</span>   <span class=\"m\">2</span>  <span class=\"m\">2842368</span>   <span class=\"m\">6</span>   <span class=\"m\">7402936</span>  <span class=\"m\">16</span> <span class=\"s1\">&#39;[54]&#39;</span>\n\n     <span class=\"m\">2</span>   <span class=\"m\">8270</span>   <span class=\"m\">2</span>  <span class=\"m\">2705248</span>   <span class=\"m\">6</span>  <span class=\"m\">10108184</span>  <span class=\"m\">21</span> <span class=\"s1\">&#39;[50]&#39;</span>\n\n     <span class=\"m\">3</span>   <span class=\"m\">8270</span>   <span class=\"m\">2</span>  <span class=\"m\">2644120</span>   <span class=\"m\">6</span>  <span class=\"m\">12752304</span>  <span class=\"m\">27</span> <span class=\"s1\">&#39;[46]&#39;</span>\n\n     <span class=\"m\">4</span>   <span class=\"m\">8269</span>   <span class=\"m\">2</span>  <span class=\"m\">2644056</span>   <span class=\"m\">6</span>  <span class=\"m\">15396360</span>  <span class=\"m\">33</span> <span class=\"s1\">&#39;[42]&#39;</span>\n\n     <span class=\"m\">5</span>   <span class=\"m\">8270</span>   <span class=\"m\">2</span>  <span class=\"m\">2578016</span>   <span class=\"m\">5</span>  <span class=\"m\">17974376</span>  <span class=\"m\">38</span> <span class=\"s1\">&#39;[48]&#39;</span>\n\n     <span class=\"m\">6</span>   <span class=\"m\">8268</span>   <span class=\"m\">2</span>  <span class=\"m\">2577920</span>   <span class=\"m\">5</span>  <span class=\"m\">20552296</span>  <span class=\"m\">44</span> <span class=\"s1\">&#39;[18]&#39;</span>\n\n     <span class=\"m\">7</span>   <span class=\"m\">8270</span>   <span class=\"m\">2</span>  <span class=\"m\">2511960</span>   <span class=\"m\">5</span>  <span class=\"m\">23064256</span>  <span class=\"m\">49</span> <span class=\"s1\">&#39;[26]&#39;</span>\n\n     <span class=\"m\">8</span>   <span class=\"m\">8270</span>   <span class=\"m\">2</span>  <span class=\"m\">2445864</span>   <span class=\"m\">5</span>  <span class=\"m\">25510120</span>  <span class=\"m\">54</span> <span class=\"s1\">&#39;[52]&#39;</span>\n\n     <span class=\"m\">9</span>   <span class=\"m\">8268</span>   <span class=\"m\">2</span>  <span class=\"m\">1322208</span>   <span class=\"m\">3</span>  <span class=\"m\">26832328</span>  <span class=\"m\">57</span> <span class=\"s1\">&#39;[0]&#39;</span>\n\n&lt;<span class=\"m\">517</span> more rows. Type e.g. <span class=\"s1\">&#39;_.more&#39;</span> to view.&gt;\n\n\n\n&gt;&gt;&gt; inject<span class=\"o\">(</span><span class=\"s1\">&#39;print &gt;&gt;sys.stderr, guppy_hpy.heap()[0].byrcs[0].byrcs&#39;</span><span class=\"o\">)</span>\n\n<span class=\"o\">==</span>&gt; pid:<span class=\"o\">[</span><span class=\"m\">21824</span><span class=\"o\">]</span> <span class=\"c1\">#threads:[11] current thread:[139643938924288]</span>\n\nPartition of a <span class=\"nb\">set</span> of <span class=\"m\">373686</span> objects. Total <span class=\"nv\">size</span> <span class=\"o\">=</span> <span class=\"m\">47105912</span> bytes.\n\nIndex  Count   %     Size   % Cumulative  % Referrers by Kind <span class=\"o\">(</span>class / dict of class<span class=\"o\">)</span>\n\n     <span class=\"m\">0</span> <span class=\"m\">373686</span> <span class=\"m\">100</span> <span class=\"m\">47105912</span> <span class=\"m\">100</span>  <span class=\"m\">47105912</span> <span class=\"m\">100</span> list\n\n\n\n&gt;&gt;&gt; inject<span class=\"o\">(</span><span class=\"s1\">&#39;print &gt;&gt;sys.stderr, guppy_hpy.heapu()&#39;</span><span class=\"o\">)</span>\n\n<span class=\"o\">==</span>&gt; pid:<span class=\"o\">[</span><span class=\"m\">21824</span><span class=\"o\">]</span> <span class=\"c1\">#threads:[11] current thread:[139643938924288]</span>\n\nData from unreachable objects.\n\nPartition of a <span class=\"nb\">set</span> of <span class=\"m\">905</span> objects. Total <span class=\"nv\">size</span> <span class=\"o\">=</span> <span class=\"m\">317792</span> bytes.\n\nIndex  Count   %     Size   % Cumulative  % Class\n\n     <span class=\"m\">0</span>    <span class=\"m\">108</span>  <span class=\"m\">12</span>   <span class=\"m\">215328</span>  <span class=\"m\">68</span>    <span class=\"m\">215328</span>  <span class=\"m\">68</span> dict\n\n     <span class=\"m\">1</span>     <span class=\"m\">40</span>   <span class=\"m\">4</span>    <span class=\"m\">34880</span>  <span class=\"m\">11</span>    <span class=\"m\">250208</span>  <span class=\"m\">79</span> <span class=\"nb\">type</span>\n\n     <span class=\"m\">2</span>    <span class=\"m\">104</span>  <span class=\"m\">11</span>    <span class=\"m\">14656</span>   <span class=\"m\">5</span>    <span class=\"m\">264864</span>  <span class=\"m\">83</span> list\n\n     <span class=\"m\">3</span>    <span class=\"m\">155</span>  <span class=\"m\">17</span>    <span class=\"m\">12920</span>   <span class=\"m\">4</span>    <span class=\"m\">277784</span>  <span class=\"m\">87</span> str\n\n     <span class=\"m\">4</span>    <span class=\"m\">125</span>  <span class=\"m\">14</span>    <span class=\"m\">12528</span>   <span class=\"m\">4</span>    <span class=\"m\">290312</span>  <span class=\"m\">91</span> tuple\n\n     <span class=\"m\">5</span>    <span class=\"m\">144</span>  <span class=\"m\">16</span>    <span class=\"m\">11520</span>   <span class=\"m\">4</span>    <span class=\"m\">301832</span>  <span class=\"m\">95</span> __builtin__.wrapper_descriptor\n\n     <span class=\"m\">6</span>     <span class=\"m\">53</span>   <span class=\"m\">6</span>     <span class=\"m\">3816</span>   <span class=\"m\">1</span>    <span class=\"m\">305648</span>  <span class=\"m\">96</span> types.MemberDescriptorType\n\n     <span class=\"m\">7</span>     <span class=\"m\">51</span>   <span class=\"m\">6</span>     <span class=\"m\">3672</span>   <span class=\"m\">1</span>    <span class=\"m\">309320</span>  <span class=\"m\">97</span> __builtin__.method_descriptor\n\n     <span class=\"m\">8</span>     <span class=\"m\">35</span>   <span class=\"m\">4</span>     <span class=\"m\">2520</span>   <span class=\"m\">1</span>    <span class=\"m\">311840</span>  <span class=\"m\">98</span> types.BuiltinFunctionType\n\n     <span class=\"m\">9</span>     <span class=\"m\">19</span>   <span class=\"m\">2</span>     <span class=\"m\">1368</span>   <span class=\"m\">0</span>    <span class=\"m\">313208</span>  <span class=\"m\">99</span> types.GetSetDescriptorType\n\n&lt;<span class=\"m\">42</span> more rows. Type e.g. <span class=\"s1\">&#39;_.more&#39;</span> to view.&gt;\n\n\n\n&gt;&gt;&gt; inject<span class=\"o\">(</span><span class=\"s1\">&#39;print &gt;&gt;sys.stderr, guppy_hpy.heap().byclodo&#39;</span><span class=\"o\">)</span>\n\n<span class=\"o\">==</span>&gt; pid:<span class=\"o\">[</span><span class=\"m\">21824</span><span class=\"o\">]</span> <span class=\"c1\">#threads:[11] current thread:[139643938924288]</span>\n\nPartition of a <span class=\"nb\">set</span> of <span class=\"m\">746177</span> objects. Total <span class=\"nv\">size</span> <span class=\"o\">=</span> <span class=\"m\">112935584</span> bytes.\n\nIndex  Count   %     Size   % Cumulative  % Kind <span class=\"o\">(</span>class / dict of class<span class=\"o\">)</span>\n\n     <span class=\"m\">0</span> <span class=\"m\">387171</span>  <span class=\"m\">52</span> <span class=\"m\">48598408</span>  <span class=\"m\">43</span>  <span class=\"m\">48598408</span>  <span class=\"m\">43</span> unicode\n\n     <span class=\"m\">1</span>   <span class=\"m\">8255</span>   <span class=\"m\">1</span>  <span class=\"m\">8651240</span>   <span class=\"m\">8</span>  <span class=\"m\">57249648</span>  <span class=\"m\">51</span> dict of segway.cluster.RestartableJob\n\n     <span class=\"m\">2</span>   <span class=\"m\">8255</span>   <span class=\"m\">1</span>  <span class=\"m\">8651240</span>   <span class=\"m\">8</span>  <span class=\"m\">65900888</span>  <span class=\"m\">58</span> dict of segway.cluster.sge.JobTemplateFactory\n\n     <span class=\"m\">3</span>  <span class=\"m\">79035</span>  <span class=\"m\">11</span>  <span class=\"m\">7895784</span>   <span class=\"m\">7</span>  <span class=\"m\">73796672</span>  <span class=\"m\">65</span> str\n\n     <span class=\"m\">4</span>  <span class=\"m\">13790</span>   <span class=\"m\">2</span>  <span class=\"m\">5972464</span>   <span class=\"m\">5</span>  <span class=\"m\">79769136</span>  <span class=\"m\">71</span> list\n\n     <span class=\"m\">5</span>  <span class=\"m\">17279</span>   <span class=\"m\">2</span>  <span class=\"m\">5805800</span>   <span class=\"m\">5</span>  <span class=\"m\">85574936</span>  <span class=\"m\">76</span> dict <span class=\"o\">(</span>no owner<span class=\"o\">)</span>\n\n     <span class=\"m\">6</span>  <span class=\"m\">69375</span>   <span class=\"m\">9</span>  <span class=\"m\">5515384</span>   <span class=\"m\">5</span>  <span class=\"m\">91090320</span>  <span class=\"m\">81</span> tuple\n\n     <span class=\"m\">7</span>  <span class=\"m\">19982</span>   <span class=\"m\">3</span>  <span class=\"m\">5157728</span>   <span class=\"m\">5</span>  <span class=\"m\">96248048</span>  <span class=\"m\">85</span> path.path\n\n     <span class=\"m\">8</span>  <span class=\"m\">16510</span>   <span class=\"m\">2</span>  <span class=\"m\">2377440</span>   <span class=\"m\">2</span>  <span class=\"m\">98625488</span>  <span class=\"m\">87</span> 0x312e480\n\n     <span class=\"m\">9</span>   <span class=\"m\">8255</span>   <span class=\"m\">1</span>  <span class=\"m\">2311400</span>   <span class=\"m\">2</span> <span class=\"m\">100936888</span>  <span class=\"m\">89</span> dict of drmaa.session.JobTemplate\n\n&lt;<span class=\"m\">355</span> more rows. Type e.g. <span class=\"s1\">&#39;_.more&#39;</span> to view.&gt;\n\n\n\n&gt;&gt;&gt; inject<span class=\"o\">(</span><span class=\"s1\">&#39;print &gt;&gt;sys.stderr, guppy_hpy.heap().byid&#39;</span><span class=\"o\">)</span>\n\n<span class=\"o\">==</span>&gt; pid:<span class=\"o\">[</span><span class=\"m\">21824</span><span class=\"o\">]</span> <span class=\"c1\">#threads:[11] current thread:[139643938924288]</span>\n\nSet of <span class=\"m\">745706</span> &lt;mixed&gt; objects. Total <span class=\"nv\">size</span> <span class=\"o\">=</span> <span class=\"m\">112859584</span> bytes.\n\nIndex     Size   %   Cumulative  %   Brief\n\n     <span class=\"m\">0</span>    <span class=\"m\">98600</span>   <span class=\"m\">0</span>.1     <span class=\"m\">98600</span>   <span class=\"m\">0</span>.1 segway.cluster.RestartableJobDict: 0x7ef57e1f0bc0\n\n     <span class=\"m\">1</span>    <span class=\"m\">98600</span>   <span class=\"m\">0</span>.1    <span class=\"m\">197200</span>   <span class=\"m\">0</span>.2 segway.cluster.RestartableJobDict: 0x7efa7a9a2bc0\n\n     <span class=\"m\">2</span>    <span class=\"m\">98584</span>   <span class=\"m\">0</span>.1    <span class=\"m\">295784</span>   <span class=\"m\">0</span>.3 dict <span class=\"o\">(</span>no owner<span class=\"o\">)</span>: 0x2f3aba0*843\n\n     <span class=\"m\">3</span>    <span class=\"m\">49448</span>   <span class=\"m\">0</span>.0    <span class=\"m\">345232</span>   <span class=\"m\">0</span>.3 segway.cluster.RestartableJobDict: 0x7ef552d98fc0\n\n     <span class=\"m\">4</span>    <span class=\"m\">49448</span>   <span class=\"m\">0</span>.0    <span class=\"m\">394680</span>   <span class=\"m\">0</span>.3 segway.cluster.RestartableJobDict: 0x7ef55b9b13c0\n\n     <span class=\"m\">5</span>    <span class=\"m\">49448</span>   <span class=\"m\">0</span>.0    <span class=\"m\">444128</span>   <span class=\"m\">0</span>.4 segway.cluster.RestartableJobDict: 0x7ef562907ba0\n\n     <span class=\"m\">6</span>    <span class=\"m\">49448</span>   <span class=\"m\">0</span>.0    <span class=\"m\">493576</span>   <span class=\"m\">0</span>.4 segway.cluster.RestartableJobDict: 0x7ef571e837c0\n\n     <span class=\"m\">7</span>    <span class=\"m\">49448</span>   <span class=\"m\">0</span>.0    <span class=\"m\">543024</span>   <span class=\"m\">0</span>.5 segway.cluster.RestartableJobDict: 0x7ef5749199b0\n\n     <span class=\"m\">8</span>    <span class=\"m\">49448</span>   <span class=\"m\">0</span>.0    <span class=\"m\">592472</span>   <span class=\"m\">0</span>.5 segway.cluster.RestartableJobDict: 0x7ef578db32f0\n\n     <span class=\"m\">9</span>    <span class=\"m\">49448</span>   <span class=\"m\">0</span>.0    <span class=\"m\">641920</span>   <span class=\"m\">0</span>.6 segway.cluster.RestartableJobDict: 0x7ef595e1a400\n\n&lt;<span class=\"m\">745696</span> more rows. Type e.g. <span class=\"s1\">&#39;_.more&#39;</span> to view.&gt;\n\n\n\n&gt;&gt;&gt; inject<span class=\"o\">(</span><span class=\"s1\">&#39;print &gt;&gt;sys.stderr, guppy_hpy.heap().byrcs&#39;</span><span class=\"o\">)</span>\n\n<span class=\"o\">==</span>&gt; pid:<span class=\"o\">[</span><span class=\"m\">21824</span><span class=\"o\">]</span> <span class=\"c1\">#threads:[11] current thread:[139643938924288]</span>\n\nPartition of a <span class=\"nb\">set</span> of <span class=\"m\">745653</span> objects. Total <span class=\"nv\">size</span> <span class=\"o\">=</span> <span class=\"m\">112849664</span> bytes.\n\nIndex  Count   %     Size   % Cumulative  % Referrers by Kind <span class=\"o\">(</span>class / dict of class<span class=\"o\">)</span>\n\n     <span class=\"m\">0</span> <span class=\"m\">423460</span>  <span class=\"m\">57</span> <span class=\"m\">51153360</span>  <span class=\"m\">45</span>  <span class=\"m\">51153360</span>  <span class=\"m\">45</span> list\n\n     <span class=\"m\">1</span>  <span class=\"m\">57946</span>   <span class=\"m\">8</span> <span class=\"m\">11533632</span>  <span class=\"m\">10</span>  <span class=\"m\">62686992</span>  <span class=\"m\">56</span> dict of segway.cluster.sge.JobTemplateFactory\n\n     <span class=\"m\">2</span>   <span class=\"m\">8247</span>   <span class=\"m\">1</span>  <span class=\"m\">8642856</span>   <span class=\"m\">8</span>  <span class=\"m\">71329848</span>  <span class=\"m\">63</span> segway.cluster.RestartableJob\n\n     <span class=\"m\">3</span>   <span class=\"m\">8247</span>   <span class=\"m\">1</span>  <span class=\"m\">8642856</span>   <span class=\"m\">8</span>  <span class=\"m\">79972704</span>  <span class=\"m\">71</span> segway.cluster.sge.JobTemplateFactory\n\n     <span class=\"m\">4</span>  <span class=\"m\">45260</span>   <span class=\"m\">6</span>  <span class=\"m\">4468840</span>   <span class=\"m\">4</span>  <span class=\"m\">84441544</span>  <span class=\"m\">75</span> types.CodeType\n\n     <span class=\"m\">5</span>   <span class=\"m\">8247</span>   <span class=\"m\">1</span>  <span class=\"m\">2309160</span>   <span class=\"m\">2</span>  <span class=\"m\">86750704</span>  <span class=\"m\">77</span> 0x312e480, dict <span class=\"o\">(</span>no owner<span class=\"o\">)</span>\n\n     <span class=\"m\">6</span>   <span class=\"m\">8247</span>   <span class=\"m\">1</span>  <span class=\"m\">2309160</span>   <span class=\"m\">2</span>  <span class=\"m\">89059864</span>  <span class=\"m\">79</span> 0x312eb10\n\n     <span class=\"m\">7</span>   <span class=\"m\">8247</span>   <span class=\"m\">1</span>  <span class=\"m\">2309160</span>   <span class=\"m\">2</span>  <span class=\"m\">91369024</span>  <span class=\"m\">81</span> drmaa.session.JobTemplate\n\n     <span class=\"m\">8</span>  <span class=\"m\">51241</span>   <span class=\"m\">7</span>  <span class=\"m\">1960096</span>   <span class=\"m\">2</span>  <span class=\"m\">93329120</span>  <span class=\"m\">83</span> tuple\n\n     <span class=\"m\">9</span>  <span class=\"m\">16544</span>   <span class=\"m\">2</span>  <span class=\"m\">1899344</span>   <span class=\"m\">2</span>  <span class=\"m\">95228464</span>  <span class=\"m\">84</span> dict <span class=\"o\">(</span>no owner<span class=\"o\">)</span>\n\n&lt;<span class=\"m\">1372</span> more rows. Type e.g. <span class=\"s1\">&#39;_.more&#39;</span> to view.&gt;\n\n\n\n&gt;&gt;&gt; inject<span class=\"o\">(</span><span class=\"s1\">&#39;print &gt;&gt;sys.stderr, guppy_hpy.heap().byrcs[0].byid&#39;</span><span class=\"o\">)</span>\n\n<span class=\"o\">==</span>&gt; pid:<span class=\"o\">[</span><span class=\"m\">21824</span><span class=\"o\">]</span> <span class=\"c1\">#threads:[11] current thread:[139643938924288]</span>\n\nSet of <span class=\"m\">422945</span> &lt;mixed&gt; objects. Total <span class=\"nv\">size</span> <span class=\"o\">=</span> <span class=\"m\">51089632</span> bytes.\n\nIndex     Size   %   Cumulative  %   Brief\n\n     <span class=\"m\">0</span>     <span class=\"m\">3352</span>   <span class=\"m\">0</span>.0      <span class=\"m\">3352</span>   <span class=\"m\">0</span>.0 dict <span class=\"o\">(</span>no owner<span class=\"o\">)</span>: 0x2cee9f0*24\n\n     <span class=\"m\">1</span>     <span class=\"m\">3352</span>   <span class=\"m\">0</span>.0      <span class=\"m\">6704</span>   <span class=\"m\">0</span>.0 dict <span class=\"o\">(</span>no owner<span class=\"o\">)</span>: 0x2cef1e0*24\n\n     <span class=\"m\">2</span>     <span class=\"m\">3352</span>   <span class=\"m\">0</span>.0     <span class=\"m\">10056</span>   <span class=\"m\">0</span>.0 dict <span class=\"o\">(</span>no owner<span class=\"o\">)</span>: 0x2cef300*24\n\n     <span class=\"m\">3</span>     <span class=\"m\">3352</span>   <span class=\"m\">0</span>.0     <span class=\"m\">13408</span>   <span class=\"m\">0</span>.0 dict <span class=\"o\">(</span>no owner<span class=\"o\">)</span>: 0x2cef550*24\n\n     <span class=\"m\">4</span>     <span class=\"m\">3352</span>   <span class=\"m\">0</span>.0     <span class=\"m\">16760</span>   <span class=\"m\">0</span>.0 dict <span class=\"o\">(</span>no owner<span class=\"o\">)</span>: 0x2cf4be0*24\n\n     <span class=\"m\">5</span>     <span class=\"m\">3352</span>   <span class=\"m\">0</span>.0     <span class=\"m\">20112</span>   <span class=\"m\">0</span>.0 dict <span class=\"o\">(</span>no owner<span class=\"o\">)</span>: 0x2cf5b90*24\n\n     <span class=\"m\">6</span>     <span class=\"m\">3352</span>   <span class=\"m\">0</span>.0     <span class=\"m\">23464</span>   <span class=\"m\">0</span>.0 dict <span class=\"o\">(</span>no owner<span class=\"o\">)</span>: 0x2cf6b40*24\n\n     <span class=\"m\">7</span>     <span class=\"m\">3352</span>   <span class=\"m\">0</span>.0     <span class=\"m\">26816</span>   <span class=\"m\">0</span>.1 dict <span class=\"o\">(</span>no owner<span class=\"o\">)</span>: 0x2cf7af0*24\n\n     <span class=\"m\">8</span>     <span class=\"m\">3352</span>   <span class=\"m\">0</span>.0     <span class=\"m\">30168</span>   <span class=\"m\">0</span>.1 dict <span class=\"o\">(</span>no owner<span class=\"o\">)</span>: 0x2cf7e90*24\n\n     <span class=\"m\">9</span>     <span class=\"m\">3352</span>   <span class=\"m\">0</span>.0     <span class=\"m\">33520</span>   <span class=\"m\">0</span>.1 dict <span class=\"o\">(</span>no owner<span class=\"o\">)</span>: 0x2cf8230*24\n\n&lt;<span class=\"m\">422935</span> more rows. Type e.g. <span class=\"s1\">&#39;_.more&#39;</span> to view.&gt;\n\n\n\n&gt;&gt;&gt; inject<span class=\"o\">(</span><span class=\"s1\">&#39;print &gt;&gt;sys.stderr, guppy_hpy.heap().byrcs[0].theone&#39;</span><span class=\"o\">)</span>\n\n<span class=\"o\">==</span>&gt; pid:<span class=\"o\">[</span><span class=\"m\">21824</span><span class=\"o\">]</span> <span class=\"c1\">#threads:[11] current thread:[139643938924288]</span>\n\nPartition of a <span class=\"nb\">set</span> of <span class=\"m\">747342</span> objects. Total <span class=\"nv\">size</span> <span class=\"o\">=</span> <span class=\"m\">113121328</span> bytes.\n\nIndex  Count   %     Size   % Cumulative  % Kind <span class=\"o\">(</span>class / dict of class<span class=\"o\">)</span>\n\n     <span class=\"m\">0</span> <span class=\"m\">388073</span>  <span class=\"m\">52</span> <span class=\"m\">48713320</span>  <span class=\"m\">43</span>  <span class=\"m\">48713320</span>  <span class=\"m\">43</span> unicode\n\n     <span class=\"m\">1</span>   <span class=\"m\">8275</span>   <span class=\"m\">1</span>  <span class=\"m\">8672200</span>   <span class=\"m\">8</span>  <span class=\"m\">57385520</span>  <span class=\"m\">51</span> dict of segway.cluster.RestartableJob\n\n     <span class=\"m\">2</span>   <span class=\"m\">8275</span>   <span class=\"m\">1</span>  <span class=\"m\">8672200</span>   <span class=\"m\">8</span>  <span class=\"m\">66057720</span>  <span class=\"m\">58</span> dict of segway.cluster.sge.JobTemplateFactory\n\n     <span class=\"m\">3</span>  <span class=\"m\">79031</span>  <span class=\"m\">11</span>  <span class=\"m\">7895000</span>   <span class=\"m\">7</span>  <span class=\"m\">73952720</span>  <span class=\"m\">65</span> str\n\n     <span class=\"m\">4</span>  <span class=\"m\">13814</span>   <span class=\"m\">2</span>  <span class=\"m\">5984752</span>   <span class=\"m\">5</span>  <span class=\"m\">79937472</span>  <span class=\"m\">71</span> list\n\n     <span class=\"m\">5</span>  <span class=\"m\">17295</span>   <span class=\"m\">2</span>  <span class=\"m\">5807976</span>   <span class=\"m\">5</span>  <span class=\"m\">85745448</span>  <span class=\"m\">76</span> dict <span class=\"o\">(</span>no owner<span class=\"o\">)</span>\n\n     <span class=\"m\">6</span>  <span class=\"m\">69428</span>   <span class=\"m\">9</span>  <span class=\"m\">5519344</span>   <span class=\"m\">5</span>  <span class=\"m\">91264792</span>  <span class=\"m\">81</span> tuple\n\n     <span class=\"m\">7</span>  <span class=\"m\">20022</span>   <span class=\"m\">3</span>  <span class=\"m\">5168432</span>   <span class=\"m\">5</span>  <span class=\"m\">96433224</span>  <span class=\"m\">85</span> path.path\n\n     <span class=\"m\">8</span>  <span class=\"m\">16550</span>   <span class=\"m\">2</span>  <span class=\"m\">2383200</span>   <span class=\"m\">2</span>  <span class=\"m\">98816424</span>  <span class=\"m\">87</span> 0x312e480\n\n     <span class=\"m\">9</span>   <span class=\"m\">8275</span>   <span class=\"m\">1</span>  <span class=\"m\">2317000</span>   <span class=\"m\">2</span> <span class=\"m\">101133424</span>  <span class=\"m\">89</span> dict of drmaa.session.JobTemplate\n\n&lt;<span class=\"m\">349</span> more rows. Type e.g. <span class=\"s1\">&#39;_.more&#39;</span> to view.&gt;\n\nTraceback <span class=\"o\">(</span>most recent call last<span class=\"o\">)</span>:\n\n\n\n  File <span class=\"s2\">&quot;&lt;string&gt;&quot;</span>, line <span class=\"m\">1</span>, in &lt;module&gt;\n\n  File <span class=\"s2\">&quot;/mnt/work1/users/home2/rachelc/.local/lib/python2.7/site-packages/guppy/heapy/UniSet.py&quot;</span>, line <span class=\"m\">602</span>, in &lt;lambda&gt;\n\n    <span class=\"nv\">theone</span> <span class=\"o\">=</span> property<span class=\"o\">(</span>lambda self: self.fam.get_theone<span class=\"o\">(</span>self<span class=\"o\">)</span>, <span class=\"nv\">doc</span><span class=\"o\">=</span><span class=\"s2\">&quot;&quot;&quot;\\</span>\n\n<span class=\"s2\">  File &quot;</span>/mnt/work1/users/home2/rachelc/.local/lib/python2.7/site-packages/guppy/heapy/UniSet.py<span class=\"s2\">&quot;, line 1784, in get_theone</span>\n\n<span class=\"s2\">    raise ValueError, &#39;theone requires a singleton set&#39;</span>\n\n<span class=\"s2\">ValueError: theone requires a singleton set</span>\n</pre></div>\n\n\n<p>Guppy documentation is incredibly difficult to come by especially with the syntax used. It is essentially a declarative domain specific language to select information about the python memory of a given program. Notably <code>.heap()</code> returns a selection of the entire Python heap reachable by python objects and <code>.heapu()</code> return the heap of unreachable python objects (that should be garbage collected). It is the heap itself that shows there is an unreasonable amount of unicode objects taking up a significant amount of memory. <code>byrcs</code> selects on the heap or part of the heap and organizes by \"referrers by kind (class)\". <code>byvia</code> does the something similar except it shows where the objects are being referred via.</p>\n<p>From the preliminary data it looks like there is a massive list (of a list?) of unicode objects. Presumably this list grows the longer segway runs.</p>", "type": "rendered"}, "assignee": {"display_name": "Eric Roberts", "uuid": "{cd8c1fe0-28ca-45fb-8ef9-48090b42bb80}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D"}, "html": {"href": "https://bitbucket.org/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/17548d71dfb29d015b880f48cfc01ca3d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsER-5.png"}}, "nickname": "ericr86", "type": "user", "account_id": "557058:c80ca578-03a1-4ac6-b3ee-50372a3fceee"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2016-05-10T15:06:38.321863+00:00", "milestone": null, "updated_on": "2016-07-22T16:58:53.639839+00:00", "type": "issue", "id": 60}