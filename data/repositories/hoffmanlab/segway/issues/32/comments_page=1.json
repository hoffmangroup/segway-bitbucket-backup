{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32/comments/18543937.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/32#comment-18543937"}}, "issue": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32.json"}}, "type": "issue", "id": 32, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "title": "Error: `traindir/likelihood/likelihood.0.ll` and `traindir/likelihood/likelihood.0.ll` are the same file"}, "content": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2015-06-02T19:39:54.245419+00:00", "user": {"display_name": "Sakura Tamaki", "uuid": "{2e49c073-0cbe-4333-96b1-a81988007690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D"}, "html": {"href": "https://bitbucket.org/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282/860719ec-a458-4597-a2c0-04bb410a3373/128"}}, "nickname": "Tamaki_Sakura", "type": "user", "account_id": "557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282"}, "updated_on": null, "type": "issue_comment", "id": 18543937}, {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32/comments/18544000.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/32#comment-18544000"}}, "issue": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32.json"}}, "type": "issue", "id": 32, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "title": "Error: `traindir/likelihood/likelihood.0.ll` and `traindir/likelihood/likelihood.0.ll` are the same file"}, "content": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2015-06-02T19:43:09.440234+00:00", "user": {"display_name": "Sakura Tamaki", "uuid": "{2e49c073-0cbe-4333-96b1-a81988007690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D"}, "html": {"href": "https://bitbucket.org/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282/860719ec-a458-4597-a2c0-04bb410a3373/128"}}, "nickname": "Tamaki_Sakura", "type": "user", "account_id": "557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282"}, "updated_on": null, "type": "issue_comment", "id": 18544000}, {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32/comments/18544429.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/32#comment-18544429"}}, "issue": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32.json"}}, "type": "issue", "id": 32, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "title": "Error: `traindir/likelihood/likelihood.0.ll` and `traindir/likelihood/likelihood.0.ll` are the same file"}, "content": {"raw": "OK that weird, it not only failed with num-instance=2, 3 doesn't work either. It does work for 10 however. ", "markup": "markdown", "html": "<p>OK that weird, it not only failed with num-instance=2, 3 doesn't work either. It does work for 10 however. </p>", "type": "rendered"}, "created_on": "2015-06-02T20:04:23.845685+00:00", "user": {"display_name": "Sakura Tamaki", "uuid": "{2e49c073-0cbe-4333-96b1-a81988007690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D"}, "html": {"href": "https://bitbucket.org/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282/860719ec-a458-4597-a2c0-04bb410a3373/128"}}, "nickname": "Tamaki_Sakura", "type": "user", "account_id": "557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282"}, "updated_on": null, "type": "issue_comment", "id": 18544429}, {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32/comments/18544774.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/32#comment-18544774"}}, "issue": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32.json"}}, "type": "issue", "id": 32, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "title": "Error: `traindir/likelihood/likelihood.0.ll` and `traindir/likelihood/likelihood.0.ll` are the same file"}, "content": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2015-06-02T20:25:16.564657+00:00", "user": {"display_name": "Sakura Tamaki", "uuid": "{2e49c073-0cbe-4333-96b1-a81988007690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D"}, "html": {"href": "https://bitbucket.org/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282/860719ec-a458-4597-a2c0-04bb410a3373/128"}}, "nickname": "Tamaki_Sakura", "type": "user", "account_id": "557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282"}, "updated_on": null, "type": "issue_comment", "id": 18544774}, {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32/comments/18549036.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/32#comment-18549036"}}, "issue": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32.json"}}, "type": "issue", "id": 32, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "title": "Error: `traindir/likelihood/likelihood.0.ll` and `traindir/likelihood/likelihood.0.ll` are the same file"}, "content": {"raw": "Is this something that only fails when thread 0 is the winner? Try running the 10-instances case under the Python debugger (`python -m pdb \"$(which segway)\"` followed by the arguments will work) and then set a breakpoint on the line where `copy2` is called. For example:\n\n```\n#!python\n\nb /mnt/work1/users/home2/xzeng/.local/lib/python2.7/site-packages/segway-1.2.2.dev0-py2.7.egg/segway/run.py:1488\nc\n```\n\nThen `p src_filename, dst_filename` when your breakpoint is hit.", "markup": "markdown", "html": "<p>Is this something that only fails when thread 0 is the winner? Try running the 10-instances case under the Python debugger (<code>python -m pdb \"$(which segway)\"</code> followed by the arguments will work) and then set a breakpoint on the line where <code>copy2</code> is called. For example:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">b</span> <span class=\"o\">/</span><span class=\"n\">mnt</span><span class=\"o\">/</span><span class=\"n\">work1</span><span class=\"o\">/</span><span class=\"n\">users</span><span class=\"o\">/</span><span class=\"n\">home2</span><span class=\"o\">/</span><span class=\"n\">xzeng</span><span class=\"o\">/.</span><span class=\"n\">local</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">python2</span><span class=\"o\">.</span><span class=\"mi\">7</span><span class=\"o\">/</span><span class=\"n\">site</span><span class=\"o\">-</span><span class=\"n\">packages</span><span class=\"o\">/</span><span class=\"n\">segway</span><span class=\"o\">-</span><span class=\"mf\">1.2</span><span class=\"o\">.</span><span class=\"mf\">2.</span><span class=\"n\">dev0</span><span class=\"o\">-</span><span class=\"n\">py2</span><span class=\"o\">.</span><span class=\"mf\">7.</span><span class=\"n\">egg</span><span class=\"o\">/</span><span class=\"n\">segway</span><span class=\"o\">/</span><span class=\"n\">run</span><span class=\"o\">.</span><span class=\"n\">py</span><span class=\"p\">:</span><span class=\"mi\">1488</span>\n<span class=\"n\">c</span>\n</pre></div>\n\n\n<p>Then <code>p src_filename, dst_filename</code> when your breakpoint is hit.</p>", "type": "rendered"}, "created_on": "2015-06-03T01:59:33.054455+00:00", "user": {"display_name": "Michael Hoffman", "uuid": "{ffa8e039-5d4d-4f69-a4ba-ac25cbaf700b}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bffa8e039-5d4d-4f69-a4ba-ac25cbaf700b%7D"}, "html": {"href": "https://bitbucket.org/%7Bffa8e039-5d4d-4f69-a4ba-ac25cbaf700b%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/6a95e857a02504cbad5fe965c9d9e4bbd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMH-1.png"}}, "nickname": "hoffman", "type": "user", "account_id": "557058:a9657985-692c-405c-995b-4e41cda7ba2b"}, "updated_on": null, "type": "issue_comment", "id": 18549036}, {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32/comments/18549051.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/32#comment-18549051"}}, "issue": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32.json"}}, "type": "issue", "id": 32, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "title": "Error: `traindir/likelihood/likelihood.0.ll` and `traindir/likelihood/likelihood.0.ll` are the same file"}, "content": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2015-06-03T02:00:23.653058+00:00", "user": {"display_name": "Michael Hoffman", "uuid": "{ffa8e039-5d4d-4f69-a4ba-ac25cbaf700b}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bffa8e039-5d4d-4f69-a4ba-ac25cbaf700b%7D"}, "html": {"href": "https://bitbucket.org/%7Bffa8e039-5d4d-4f69-a4ba-ac25cbaf700b%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/6a95e857a02504cbad5fe965c9d9e4bbd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMH-1.png"}}, "nickname": "hoffman", "type": "user", "account_id": "557058:a9657985-692c-405c-995b-4e41cda7ba2b"}, "updated_on": null, "type": "issue_comment", "id": 18549051}, {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32/comments/18567890.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/32#comment-18567890"}}, "issue": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32.json"}}, "type": "issue", "id": 32, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "title": "Error: `traindir/likelihood/likelihood.0.ll` and `traindir/likelihood/likelihood.0.ll` are the same file"}, "content": {"raw": "Yes I guess it only happens when 0 is winning.\nWhen running with 10 instances:\n\n```\n#!\n\n(path('traindir/likelihood/likelihood.5.ll'), path('traindir/likelihood/likelihood.0.ll'))\n```\n\nI found a case when running 2 instances:\n\n```\n#!\n\n(path('traindir/likelihood/likelihood.1.ll'), path('traindir/likelihood/likelihood.0.ll'))\n```\n\nIt still succeed.\n\nIt sounds like the name of the successful likelihood file is just wrong.", "markup": "markdown", "html": "<p>Yes I guess it only happens when 0 is winning.\nWhen running with 10 instances:</p>\n<div class=\"codehilite\"><pre><span></span>(path(&#39;traindir/likelihood/likelihood.5.ll&#39;), path(&#39;traindir/likelihood/likelihood.0.ll&#39;))\n</pre></div>\n\n\n<p>I found a case when running 2 instances:</p>\n<div class=\"codehilite\"><pre><span></span>(path(&#39;traindir/likelihood/likelihood.1.ll&#39;), path(&#39;traindir/likelihood/likelihood.0.ll&#39;))\n</pre></div>\n\n\n<p>It still succeed.</p>\n<p>It sounds like the name of the successful likelihood file is just wrong.</p>", "type": "rendered"}, "created_on": "2015-06-03T15:41:19.051235+00:00", "user": {"display_name": "Sakura Tamaki", "uuid": "{2e49c073-0cbe-4333-96b1-a81988007690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D"}, "html": {"href": "https://bitbucket.org/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282/860719ec-a458-4597-a2c0-04bb410a3373/128"}}, "nickname": "Tamaki_Sakura", "type": "user", "account_id": "557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282"}, "updated_on": "2015-06-03T15:43:15.752743+00:00", "type": "issue_comment", "id": 18567890}, {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32/comments/18567922.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/32#comment-18567922"}}, "issue": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32.json"}}, "type": "issue", "id": 32, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "title": "Error: `traindir/likelihood/likelihood.0.ll` and `traindir/likelihood/likelihood.0.ll` are the same file"}, "content": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2015-06-03T15:42:59.527384+00:00", "user": {"display_name": "Sakura Tamaki", "uuid": "{2e49c073-0cbe-4333-96b1-a81988007690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D"}, "html": {"href": "https://bitbucket.org/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282/860719ec-a458-4597-a2c0-04bb410a3373/128"}}, "nickname": "Tamaki_Sakura", "type": "user", "account_id": "557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282"}, "updated_on": null, "type": "issue_comment", "id": 18567922}, {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32/comments/18592159.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/32#comment-18592159"}}, "issue": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32.json"}}, "type": "issue", "id": 32, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "title": "Error: `traindir/likelihood/likelihood.0.ll` and `traindir/likelihood/likelihood.0.ll` are the same file"}, "content": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2015-06-04T14:25:20.466545+00:00", "user": {"display_name": "Sakura Tamaki", "uuid": "{2e49c073-0cbe-4333-96b1-a81988007690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D"}, "html": {"href": "https://bitbucket.org/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282/860719ec-a458-4597-a2c0-04bb410a3373/128"}}, "nickname": "Tamaki_Sakura", "type": "user", "account_id": "557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282"}, "updated_on": null, "type": "issue_comment", "id": 18592159}, {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32/comments/18592513.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/32#comment-18592513"}}, "issue": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32.json"}}, "type": "issue", "id": 32, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "title": "Error: `traindir/likelihood/likelihood.0.ll` and `traindir/likelihood/likelihood.0.ll` are the same file"}, "content": {"raw": "```'traindir/likelihood/likelihood.0.ll'``` Indeed seems like the final resulting likelihood file requested by the segway.\n\nFrom the error log we could see that ```dst_filename``` traced back to the ```copy_results``` method called in ```proc_train_result```, where the ```dst_filename``` came from the third item of the list ```dst_filenames``` in the parameter of method, which again come from  the method ```run_train``` where it create dst_filenames using ```self.setup_train``` where this function shows me that the third item of the list ```dst_filenames``` is ```self.log_likelihood_filename```\n\nThere is only one place where ```self.log_likelihood_filename``` can be assigned to any non-null values by searching through the entire run.py, which is at line 1300:\n\n```\n#!python\n    def set_log_likelihood_filenames(self, instance_index=0, new=False):\n        if new or not self.log_likelihood_filename:\n            log_likelihood_filename = \\\n                self.make_filename(PREFIX_LIKELIHOOD, instance_index,\n                                   EXT_LIKELIHOOD,\n                                   subdirname=SUBDIRNAME_LIKELIHOOD)\n\n            self.log_likelihood_filename = log_likelihood_filename\n\n            self.log_likelihood_tab_filename = \\\n                self.make_log_likelihood_tab_filename(instance_index,\n                                                      self.work_dirname)\n```\nThis means that the final likelihood file segway is intended to write is going to have a filename in ```PREFIX_LIKELIHOOD.instance_index.EXT_LIKELIHOOD``` format. Thus I don't need to change the destination file name of the final likelihood in the copy. I could just add a if statement to ignore copy statement if the 0 instance is the winning method and nocopy is needed.\n", "markup": "markdown", "html": "<p><code>'traindir/likelihood/likelihood.0.ll'</code> Indeed seems like the final resulting likelihood file requested by the segway.</p>\n<p>From the error log we could see that <code>dst_filename</code> traced back to the <code>copy_results</code> method called in <code>proc_train_result</code>, where the <code>dst_filename</code> came from the third item of the list <code>dst_filenames</code> in the parameter of method, which again come from  the method <code>run_train</code> where it create dst_filenames using <code>self.setup_train</code> where this function shows me that the third item of the list <code>dst_filenames</code> is <code>self.log_likelihood_filename</code></p>\n<p>There is only one place where <code>self.log_likelihood_filename</code> can be assigned to any non-null values by searching through the entire run.py, which is at line 1300:</p>\n<div class=\"codehilite language-python\"><pre><span></span>    <span class=\"k\">def</span> <span class=\"nf\">set_log_likelihood_filenames</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">instance_index</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">new</span><span class=\"o\">=</span><span class=\"bp\">False</span><span class=\"p\">):</span>\n        <span class=\"k\">if</span> <span class=\"n\">new</span> <span class=\"ow\">or</span> <span class=\"ow\">not</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">log_likelihood_filename</span><span class=\"p\">:</span>\n            <span class=\"n\">log_likelihood_filename</span> <span class=\"o\">=</span> \\\n                <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">make_filename</span><span class=\"p\">(</span><span class=\"n\">PREFIX_LIKELIHOOD</span><span class=\"p\">,</span> <span class=\"n\">instance_index</span><span class=\"p\">,</span>\n                                   <span class=\"n\">EXT_LIKELIHOOD</span><span class=\"p\">,</span>\n                                   <span class=\"n\">subdirname</span><span class=\"o\">=</span><span class=\"n\">SUBDIRNAME_LIKELIHOOD</span><span class=\"p\">)</span>\n\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">log_likelihood_filename</span> <span class=\"o\">=</span> <span class=\"n\">log_likelihood_filename</span>\n\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">log_likelihood_tab_filename</span> <span class=\"o\">=</span> \\\n                <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">make_log_likelihood_tab_filename</span><span class=\"p\">(</span><span class=\"n\">instance_index</span><span class=\"p\">,</span>\n                                                      <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">work_dirname</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>This means that the final likelihood file segway is intended to write is going to have a filename in <code>PREFIX_LIKELIHOOD.instance_index.EXT_LIKELIHOOD</code> format. Thus I don't need to change the destination file name of the final likelihood in the copy. I could just add a if statement to ignore copy statement if the 0 instance is the winning method and nocopy is needed.</p>", "type": "rendered"}, "created_on": "2015-06-04T14:40:06.922842+00:00", "user": {"display_name": "Sakura Tamaki", "uuid": "{2e49c073-0cbe-4333-96b1-a81988007690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D"}, "html": {"href": "https://bitbucket.org/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282/860719ec-a458-4597-a2c0-04bb410a3373/128"}}, "nickname": "Tamaki_Sakura", "type": "user", "account_id": "557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282"}, "updated_on": "2015-06-04T14:40:49.083272+00:00", "type": "issue_comment", "id": 18592513}, {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32/comments/18593227.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/32#comment-18593227"}}, "issue": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32.json"}}, "type": "issue", "id": 32, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "title": "Error: `traindir/likelihood/likelihood.0.ll` and `traindir/likelihood/likelihood.0.ll` are the same file"}, "content": {"raw": "The name \"set_log_likelihood_filenames\" seems to indicate that it's supposed to set more than one likelihood filename on a per instance basis (with the default being set to zero: `instance_index=0`). It would seem like something is fundmentally running wrong. Each log_likelihood_filename should be set to it's correct instance_index number and if it's always '0' then that looks to be incorrect.\n\nCan you figure out why set_log_likelihood_filenames is only called with `instance_index == 0` for multiple instances?", "markup": "markdown", "html": "<p>The name \"set_log_likelihood_filenames\" seems to indicate that it's supposed to set more than one likelihood filename on a per instance basis (with the default being set to zero: <code>instance_index=0</code>). It would seem like something is fundmentally running wrong. Each log_likelihood_filename should be set to it's correct instance_index number and if it's always '0' then that looks to be incorrect.</p>\n<p>Can you figure out why set_log_likelihood_filenames is only called with <code>instance_index == 0</code> for multiple instances?</p>", "type": "rendered"}, "created_on": "2015-06-04T15:08:09.984582+00:00", "user": {"display_name": "Eric Roberts", "uuid": "{cd8c1fe0-28ca-45fb-8ef9-48090b42bb80}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D"}, "html": {"href": "https://bitbucket.org/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/17548d71dfb29d015b880f48cfc01ca3d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsER-5.png"}}, "nickname": "ericr86", "type": "user", "account_id": "557058:c80ca578-03a1-4ac6-b3ee-50372a3fceee"}, "updated_on": "2015-06-04T15:08:47.337599+00:00", "type": "issue_comment", "id": 18593227}, {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32/comments/18593318.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/32#comment-18593318"}}, "issue": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32.json"}}, "type": "issue", "id": 32, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "title": "Error: `traindir/likelihood/likelihood.0.ll` and `traindir/likelihood/likelihood.0.ll` are the same file"}, "content": {"raw": "```set_log_likelihood_filenames``` will be called for cases not only ```instance_index == 0```. The only thing is that for the final result file it has always been 0. There are other places where they call ```set_log_likelihood_filenames``` which generate filenames such like ```likelihood.9.ll``` for instance 9 but none of them will be used as a final result file.", "markup": "markdown", "html": "<p><code>set_log_likelihood_filenames</code> will be called for cases not only <code>instance_index == 0</code>. The only thing is that for the final result file it has always been 0. There are other places where they call <code>set_log_likelihood_filenames</code> which generate filenames such like <code>likelihood.9.ll</code> for instance 9 but none of them will be used as a final result file.</p>", "type": "rendered"}, "created_on": "2015-06-04T15:11:18.008607+00:00", "user": {"display_name": "Sakura Tamaki", "uuid": "{2e49c073-0cbe-4333-96b1-a81988007690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D"}, "html": {"href": "https://bitbucket.org/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282/860719ec-a458-4597-a2c0-04bb410a3373/128"}}, "nickname": "Tamaki_Sakura", "type": "user", "account_id": "557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282"}, "updated_on": "2015-06-04T15:15:04.019869+00:00", "type": "issue_comment", "id": 18593318}, {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32/comments/18593537.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/32#comment-18593537"}}, "issue": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32.json"}}, "type": "issue", "id": 32, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "title": "Error: `traindir/likelihood/likelihood.0.ll` and `traindir/likelihood/likelihood.0.ll` are the same file"}, "content": {"raw": "Perhaps I'm not understanding something:\n\"self.setup_train where this function shows me that the third item of the list dst_filenames is self.log_likelihood_filename\n\nThere is only one place where self.log_likelihood_filename can be assigned\"\n\nIs dst_filenames not the final result file? If not - where is the final result file name set? Why is it always 0?", "markup": "markdown", "html": "<p>Perhaps I'm not understanding something:\n\"self.setup_train where this function shows me that the third item of the list dst_filenames is self.log_likelihood_filename</p>\n<p>There is only one place where self.log_likelihood_filename can be assigned\"</p>\n<p>Is dst_filenames not the final result file? If not - where is the final result file name set? Why is it always 0?</p>", "type": "rendered"}, "created_on": "2015-06-04T15:19:27.480448+00:00", "user": {"display_name": "Eric Roberts", "uuid": "{cd8c1fe0-28ca-45fb-8ef9-48090b42bb80}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D"}, "html": {"href": "https://bitbucket.org/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/17548d71dfb29d015b880f48cfc01ca3d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsER-5.png"}}, "nickname": "ericr86", "type": "user", "account_id": "557058:c80ca578-03a1-4ac6-b3ee-50372a3fceee"}, "updated_on": null, "type": "issue_comment", "id": 18593537}, {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32/comments/18593813.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/32#comment-18593813"}}, "issue": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32.json"}}, "type": "issue", "id": 32, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "title": "Error: `traindir/likelihood/likelihood.0.ll` and `traindir/likelihood/likelihood.0.ll` are the same file"}, "content": {"raw": "Some instance assigned ```self.log_likelihood_filename``` to a non-zero value through ```run_train_instance``` which is again called as part of the ```TrainThread``` object. But all instance except 0 are in other TrainThreads thus does not involve the functions in the main thread, including the ```proc_train_results``` and ```run_train```. \n\nFor the main thread,  we can see that  ```run_train``` is called by method ```run``` at line 2359. Before that at line 2346, we can see that the main thread called ```save_obervation_params``` where this function called ```self.set_log_likelihood_filenames()``` with no other parameters at line 1486, give the main thread always have ``` set_log_likelihood_filenames``` with instance 0.\n\n", "markup": "markdown", "html": "<p>Some instance assigned <code>self.log_likelihood_filename</code> to a non-zero value through <code>run_train_instance</code> which is again called as part of the <code>TrainThread</code> object. But all instance except 0 are in other TrainThreads thus does not involve the functions in the main thread, including the <code>proc_train_results</code> and <code>run_train</code>. </p>\n<p>For the main thread,  we can see that  <code>run_train</code> is called by method <code>run</code> at line 2359. Before that at line 2346, we can see that the main thread called <code>save_obervation_params</code> where this function called <code>self.set_log_likelihood_filenames()</code> with no other parameters at line 1486, give the main thread always have <code>set_log_likelihood_filenames</code> with instance 0.</p>", "type": "rendered"}, "created_on": "2015-06-04T15:30:31.790454+00:00", "user": {"display_name": "Sakura Tamaki", "uuid": "{2e49c073-0cbe-4333-96b1-a81988007690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D"}, "html": {"href": "https://bitbucket.org/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282/860719ec-a458-4597-a2c0-04bb410a3373/128"}}, "nickname": "Tamaki_Sakura", "type": "user", "account_id": "557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282"}, "updated_on": "2015-06-04T15:30:49.613333+00:00", "type": "issue_comment", "id": 18593813}, {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32/comments/18594115.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/32#comment-18594115"}}, "issue": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32.json"}}, "type": "issue", "id": 32, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "title": "Error: `traindir/likelihood/likelihood.0.ll` and `traindir/likelihood/likelihood.0.ll` are the same file"}, "content": {"raw": "So if the main thread sets the likelihood final file to 0, and all other threads set it to their respective instance numbers, why do all other threads still have their destination likelihood filename still set to 0 (as you mentioned originally)? Even though you just mentioned it is set to a non-zero value through run_train_instance?\n\nShow code when you can.", "markup": "markdown", "html": "<p>So if the main thread sets the likelihood final file to 0, and all other threads set it to their respective instance numbers, why do all other threads still have their destination likelihood filename still set to 0 (as you mentioned originally)? Even though you just mentioned it is set to a non-zero value through run_train_instance?</p>\n<p>Show code when you can.</p>", "type": "rendered"}, "created_on": "2015-06-04T15:41:02.505462+00:00", "user": {"display_name": "Eric Roberts", "uuid": "{cd8c1fe0-28ca-45fb-8ef9-48090b42bb80}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D"}, "html": {"href": "https://bitbucket.org/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/17548d71dfb29d015b880f48cfc01ca3d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsER-5.png"}}, "nickname": "ericr86", "type": "user", "account_id": "557058:c80ca578-03a1-4ac6-b3ee-50372a3fceee"}, "updated_on": null, "type": "issue_comment", "id": 18594115}, {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32/comments/18594152.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/32#comment-18594152"}}, "issue": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32.json"}}, "type": "issue", "id": 32, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "title": "Error: `traindir/likelihood/likelihood.0.ll` and `traindir/likelihood/likelihood.0.ll` are the same file"}, "content": {"raw": "Other thread will not call the ```proc_train_results``` which is only on the main thread, they don't have a \"destination file\".", "markup": "markdown", "html": "<p>Other thread will not call the <code>proc_train_results</code> which is only on the main thread, they don't have a \"destination file\".</p>", "type": "rendered"}, "created_on": "2015-06-04T15:42:26.190179+00:00", "user": {"display_name": "Sakura Tamaki", "uuid": "{2e49c073-0cbe-4333-96b1-a81988007690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D"}, "html": {"href": "https://bitbucket.org/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282/860719ec-a458-4597-a2c0-04bb410a3373/128"}}, "nickname": "Tamaki_Sakura", "type": "user", "account_id": "557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282"}, "updated_on": null, "type": "issue_comment", "id": 18594152}, {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32/comments/18594676.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/32#comment-18594676"}}, "issue": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32.json"}}, "type": "issue", "id": 32, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "title": "Error: `traindir/likelihood/likelihood.0.ll` and `traindir/likelihood/likelihood.0.ll` are the same file"}, "content": {"raw": "What about this?\n```python\n    def finish_train(self, instance_params, dst_filenames):\n        if self.instance_make_new_params:\n            self.proc_train_results(instance_params, dst_filenames)\n```\nthis seems to be called for every instance and should call `proc_train_results` which should in turn set the correct numbers for the dst_filenames. Why isn't this being called on a per instance basis?", "markup": "markdown", "html": "<p>What about this?</p>\n<div class=\"codehilite language-python\"><pre><span></span>    <span class=\"k\">def</span> <span class=\"nf\">finish_train</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">instance_params</span><span class=\"p\">,</span> <span class=\"n\">dst_filenames</span><span class=\"p\">):</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">instance_make_new_params</span><span class=\"p\">:</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">proc_train_results</span><span class=\"p\">(</span><span class=\"n\">instance_params</span><span class=\"p\">,</span> <span class=\"n\">dst_filenames</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>this seems to be called for every instance and should call <code>proc_train_results</code> which should in turn set the correct numbers for the dst_filenames. Why isn't this being called on a per instance basis?</p>", "type": "rendered"}, "created_on": "2015-06-04T16:07:46.011792+00:00", "user": {"display_name": "Eric Roberts", "uuid": "{cd8c1fe0-28ca-45fb-8ef9-48090b42bb80}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D"}, "html": {"href": "https://bitbucket.org/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/17548d71dfb29d015b880f48cfc01ca3d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsER-5.png"}}, "nickname": "ericr86", "type": "user", "account_id": "557058:c80ca578-03a1-4ac6-b3ee-50372a3fceee"}, "updated_on": null, "type": "issue_comment", "id": 18594676}, {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32/comments/18594802.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/32#comment-18594802"}}, "issue": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32.json"}}, "type": "issue", "id": 32, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "title": "Error: `traindir/likelihood/likelihood.0.ll` and `traindir/likelihood/likelihood.0.ll` are the same file"}, "content": {"raw": "No, ```finish_train``` is not called by every instance. If you search ```finish_train```, the only invoking point is at line 1948, which is the ```run_train``` function.  ```run_train```  can be only called by line 2359 in ```run``` which again can be only trace back to \n\n```\n#!python\n\n    def __call__(self, *args, **kwargs):\n        # XXX: register atexit for cleanup_resources\n\n        work_dirname = self.work_dirname\n        if not path(work_dirname).isdir():\n            self.make_dir(work_dirname, self.clobber)\n\n        self.run(*args, **kwargs)\n```\nAnd that's definitely only on the main thread.\n\nMost stuff called by every instance can be find in ```run_train_instance``` and ```run_train_multithread```, this does not includes anything dealing with result.", "markup": "markdown", "html": "<p>No, <code>finish_train</code> is not called by every instance. If you search <code>finish_train</code>, the only invoking point is at line 1948, which is the <code>run_train</code> function.  <code>run_train</code>  can be only called by line 2359 in <code>run</code> which again can be only trace back to </p>\n<div class=\"codehilite language-python\"><pre><span></span>    <span class=\"k\">def</span> <span class=\"fm\">__call__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n        <span class=\"c1\"># XXX: register atexit for cleanup_resources</span>\n\n        <span class=\"n\">work_dirname</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">work_dirname</span>\n        <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"n\">work_dirname</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">isdir</span><span class=\"p\">():</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">make_dir</span><span class=\"p\">(</span><span class=\"n\">work_dirname</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">clobber</span><span class=\"p\">)</span>\n\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>And that's definitely only on the main thread.</p>\n<p>Most stuff called by every instance can be find in <code>run_train_instance</code> and <code>run_train_multithread</code>, this does not includes anything dealing with result.</p>", "type": "rendered"}, "created_on": "2015-06-04T16:12:55.579683+00:00", "user": {"display_name": "Sakura Tamaki", "uuid": "{2e49c073-0cbe-4333-96b1-a81988007690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D"}, "html": {"href": "https://bitbucket.org/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282/860719ec-a458-4597-a2c0-04bb410a3373/128"}}, "nickname": "Tamaki_Sakura", "type": "user", "account_id": "557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282"}, "updated_on": null, "type": "issue_comment", "id": 18594802}, {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32/comments/18597697.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/32#comment-18597697"}}, "issue": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32.json"}}, "type": "issue", "id": 32, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "title": "Error: `traindir/likelihood/likelihood.0.ll` and `traindir/likelihood/likelihood.0.ll` are the same file"}, "content": {"raw": "You are correct. It seems clear that the destination likelihood file is always 'traindir/likelihood/likelihood.0.ll' which is the default since `save_observation_params` performs the following:\n```python\n        if self.train:\n            self.set_log_likelihood_filenames()\n```\nWhich produces the default '0' numbered destination likelihood filename. Do you know why the `copy2(src_filename, dst_filename)` doesn't fail in the single threaded case? Surely they would both have their likelihood filenames numbered at '0'. Why doesn't this crash?\n", "markup": "markdown", "html": "<p>You are correct. It seems clear that the destination likelihood file is always 'traindir/likelihood/likelihood.0.ll' which is the default since <code>save_observation_params</code> performs the following:</p>\n<div class=\"codehilite language-python\"><pre><span></span>        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">train</span><span class=\"p\">:</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">set_log_likelihood_filenames</span><span class=\"p\">()</span>\n</pre></div>\n\n\n<p>Which produces the default '0' numbered destination likelihood filename. Do you know why the <code>copy2(src_filename, dst_filename)</code> doesn't fail in the single threaded case? Surely they would both have their likelihood filenames numbered at '0'. Why doesn't this crash?</p>", "type": "rendered"}, "created_on": "2015-06-04T18:34:10.874529+00:00", "user": {"display_name": "Eric Roberts", "uuid": "{cd8c1fe0-28ca-45fb-8ef9-48090b42bb80}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D"}, "html": {"href": "https://bitbucket.org/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/17548d71dfb29d015b880f48cfc01ca3d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsER-5.png"}}, "nickname": "ericr86", "type": "user", "account_id": "557058:c80ca578-03a1-4ac6-b3ee-50372a3fceee"}, "updated_on": null, "type": "issue_comment", "id": 18597697}, {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32/comments/18598419.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/32#comment-18598419"}}, "issue": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32.json"}}, "type": "issue", "id": 32, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "title": "Error: `traindir/likelihood/likelihood.0.ll` and `traindir/likelihood/likelihood.0.ll` are the same file"}, "content": {"raw": "According to the test I've done, single thread case do not make any call to the ```copy2``` at line 1489.\n\nI am not sure about that but my guess would be  ```self.instance_make_new_params``` is false in single thread case\nSince we have\n\n```\n#!python\n\n    @memoized_property\n    def instance_make_new_params(self):\n        \"\"\"\n        should I make new parameters in each instance?\n        \"\"\"\n        return self.num_instances > 1 or isinstance(self.num_segs, slice)\n```\n\nThis forbid the call to ```proc_train_result```\n\n```\n#!python\n    def finish_train(self, instance_params, dst_filenames):\n        if self.instance_make_new_params:\n            self.proc_train_results(instance_params, dst_filenames)\n\n```", "markup": "markdown", "html": "<p>According to the test I've done, single thread case do not make any call to the <code>copy2</code> at line 1489.</p>\n<p>I am not sure about that but my guess would be  <code>self.instance_make_new_params</code> is false in single thread case\nSince we have</p>\n<div class=\"codehilite language-python\"><pre><span></span>    <span class=\"nd\">@memoized_property</span>\n    <span class=\"k\">def</span> <span class=\"nf\">instance_make_new_params</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">        should I make new parameters in each instance?</span>\n<span class=\"sd\">        &quot;&quot;&quot;</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">num_instances</span> <span class=\"o\">&gt;</span> <span class=\"mi\">1</span> <span class=\"ow\">or</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">num_segs</span><span class=\"p\">,</span> <span class=\"nb\">slice</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>This forbid the call to <code>proc_train_result</code></p>\n<div class=\"codehilite language-python\"><pre><span></span>    <span class=\"k\">def</span> <span class=\"nf\">finish_train</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">instance_params</span><span class=\"p\">,</span> <span class=\"n\">dst_filenames</span><span class=\"p\">):</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">instance_make_new_params</span><span class=\"p\">:</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">proc_train_results</span><span class=\"p\">(</span><span class=\"n\">instance_params</span><span class=\"p\">,</span> <span class=\"n\">dst_filenames</span><span class=\"p\">)</span>\n</pre></div>", "type": "rendered"}, "created_on": "2015-06-04T19:27:04.992378+00:00", "user": {"display_name": "Sakura Tamaki", "uuid": "{2e49c073-0cbe-4333-96b1-a81988007690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D"}, "html": {"href": "https://bitbucket.org/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282/860719ec-a458-4597-a2c0-04bb410a3373/128"}}, "nickname": "Tamaki_Sakura", "type": "user", "account_id": "557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282"}, "updated_on": null, "type": "issue_comment", "id": 18598419}, {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32/comments/18615906.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/32#comment-18615906"}}, "issue": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32.json"}}, "type": "issue", "id": 32, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "title": "Error: `traindir/likelihood/likelihood.0.ll` and `traindir/likelihood/likelihood.0.ll` are the same file"}, "content": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2015-06-05T14:16:44.437502+00:00", "user": {"display_name": "Sakura Tamaki", "uuid": "{2e49c073-0cbe-4333-96b1-a81988007690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D"}, "html": {"href": "https://bitbucket.org/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282/860719ec-a458-4597-a2c0-04bb410a3373/128"}}, "nickname": "Tamaki_Sakura", "type": "user", "account_id": "557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282"}, "updated_on": null, "type": "issue_comment", "id": 18615906}, {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32/comments/18616132.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/32#comment-18616132"}}, "issue": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32.json"}}, "type": "issue", "id": 32, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "title": "Error: `traindir/likelihood/likelihood.0.ll` and `traindir/likelihood/likelihood.0.ll` are the same file"}, "content": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2015-06-05T14:25:09.383801+00:00", "user": {"display_name": "Sakura Tamaki", "uuid": "{2e49c073-0cbe-4333-96b1-a81988007690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D"}, "html": {"href": "https://bitbucket.org/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282/860719ec-a458-4597-a2c0-04bb410a3373/128"}}, "nickname": "Tamaki_Sakura", "type": "user", "account_id": "557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282"}, "updated_on": null, "type": "issue_comment", "id": 18616132}, {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32/comments/18859413.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/32#comment-18859413"}}, "issue": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32.json"}}, "type": "issue", "id": 32, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "title": "Error: `traindir/likelihood/likelihood.0.ll` and `traindir/likelihood/likelihood.0.ll` are the same file"}, "content": {"raw": "This is fixed now.", "markup": "markdown", "html": "<p>This is fixed now.</p>", "type": "rendered"}, "created_on": "2015-06-16T19:44:07.253520+00:00", "user": {"display_name": "Sakura Tamaki", "uuid": "{2e49c073-0cbe-4333-96b1-a81988007690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D"}, "html": {"href": "https://bitbucket.org/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282/860719ec-a458-4597-a2c0-04bb410a3373/128"}}, "nickname": "Tamaki_Sakura", "type": "user", "account_id": "557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282"}, "updated_on": null, "type": "issue_comment", "id": 18859413}, {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32/comments/18859420.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/32#comment-18859420"}}, "issue": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32.json"}}, "type": "issue", "id": 32, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "title": "Error: `traindir/likelihood/likelihood.0.ll` and `traindir/likelihood/likelihood.0.ll` are the same file"}, "content": {"raw": "Fixed by pull request #23", "markup": "markdown", "html": "<p>Fixed by <a href=\"#!/hoffmanlab/segway/pull-requests/23/fix-simplerecover-test-when-reading\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #23</a></p>", "type": "rendered"}, "created_on": "2015-06-16T19:44:33.403110+00:00", "user": {"display_name": "Eric Roberts", "uuid": "{cd8c1fe0-28ca-45fb-8ef9-48090b42bb80}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D"}, "html": {"href": "https://bitbucket.org/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/17548d71dfb29d015b880f48cfc01ca3d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsER-5.png"}}, "nickname": "ericr86", "type": "user", "account_id": "557058:c80ca578-03a1-4ac6-b3ee-50372a3fceee"}, "updated_on": null, "type": "issue_comment", "id": 18859420}, {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32/comments/18859437.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/32#comment-18859437"}}, "issue": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32.json"}}, "type": "issue", "id": 32, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "title": "Error: `traindir/likelihood/likelihood.0.ll` and `traindir/likelihood/likelihood.0.ll` are the same file"}, "content": {"raw": "Fixed by pull request #23", "markup": "markdown", "html": "<p>Fixed by <a href=\"#!/hoffmanlab/segway/pull-requests/23/fix-simplerecover-test-when-reading\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #23</a></p>", "type": "rendered"}, "created_on": "2015-06-16T19:45:36.622957+00:00", "user": {"display_name": "Sakura Tamaki", "uuid": "{2e49c073-0cbe-4333-96b1-a81988007690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D"}, "html": {"href": "https://bitbucket.org/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282/860719ec-a458-4597-a2c0-04bb410a3373/128"}}, "nickname": "Tamaki_Sakura", "type": "user", "account_id": "557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282"}, "updated_on": null, "type": "issue_comment", "id": 18859437}], "page": 1, "size": 25}