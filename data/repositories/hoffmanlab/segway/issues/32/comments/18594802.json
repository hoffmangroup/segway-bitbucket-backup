{"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32/comments/18594802.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/32#comment-18594802"}}, "issue": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway/issues/32.json"}}, "type": "issue", "id": 32, "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "title": "Error: `traindir/likelihood/likelihood.0.ll` and `traindir/likelihood/likelihood.0.ll` are the same file"}, "content": {"raw": "No, ```finish_train``` is not called by every instance. If you search ```finish_train```, the only invoking point is at line 1948, which is the ```run_train``` function.  ```run_train```  can be only called by line 2359 in ```run``` which again can be only trace back to \n\n```\n#!python\n\n    def __call__(self, *args, **kwargs):\n        # XXX: register atexit for cleanup_resources\n\n        work_dirname = self.work_dirname\n        if not path(work_dirname).isdir():\n            self.make_dir(work_dirname, self.clobber)\n\n        self.run(*args, **kwargs)\n```\nAnd that's definitely only on the main thread.\n\nMost stuff called by every instance can be find in ```run_train_instance``` and ```run_train_multithread```, this does not includes anything dealing with result.", "markup": "markdown", "html": "<p>No, <code>finish_train</code> is not called by every instance. If you search <code>finish_train</code>, the only invoking point is at line 1948, which is the <code>run_train</code> function.  <code>run_train</code>  can be only called by line 2359 in <code>run</code> which again can be only trace back to </p>\n<div class=\"codehilite language-python\"><pre><span></span>    <span class=\"k\">def</span> <span class=\"fm\">__call__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n        <span class=\"c1\"># XXX: register atexit for cleanup_resources</span>\n\n        <span class=\"n\">work_dirname</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">work_dirname</span>\n        <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"n\">work_dirname</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">isdir</span><span class=\"p\">():</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">make_dir</span><span class=\"p\">(</span><span class=\"n\">work_dirname</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">clobber</span><span class=\"p\">)</span>\n\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>And that's definitely only on the main thread.</p>\n<p>Most stuff called by every instance can be find in <code>run_train_instance</code> and <code>run_train_multithread</code>, this does not includes anything dealing with result.</p>", "type": "rendered"}, "created_on": "2015-06-04T16:12:55.579683+00:00", "user": {"display_name": "Sakura Tamaki", "uuid": "{2e49c073-0cbe-4333-96b1-a81988007690}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D"}, "html": {"href": "https://bitbucket.org/%7B2e49c073-0cbe-4333-96b1-a81988007690%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282/860719ec-a458-4597-a2c0-04bb410a3373/128"}}, "nickname": "Tamaki_Sakura", "type": "user", "account_id": "557058:8f562ae3-ccee-4990-9d3f-58dc4e5d4282"}, "updated_on": null, "type": "issue_comment", "id": 18594802}