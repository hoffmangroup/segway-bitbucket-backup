{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "links": {"attachments": {"href": "data/repositories/hoffmanlab/segway/issues/66/attachments_page=1.json"}, "self": {"href": "data/repositories/hoffmanlab/segway/issues/66.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/hoffmanlab/segway/issues/66/watch"}, "comments": {"href": "data/repositories/hoffmanlab/segway/issues/66/comments_page=1.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/66/new-versions-of-bedtobigbed-fail-to"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/hoffmanlab/segway/issues/66/vote"}}, "reporter": {"display_name": "Jay Hesselberth", "uuid": "{ba6c3099-0fad-4fe3-8aac-9429e99631c1}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bba6c3099-0fad-4fe3-8aac-9429e99631c1%7D"}, "html": {"href": "https://bitbucket.org/%7Bba6c3099-0fad-4fe3-8aac-9429e99631c1%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/049cb0ae5e8c23023c2e48b92a391744d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJH-6.png"}}, "nickname": "jayhesselberth", "type": "user", "account_id": "557058:b5b61d92-1c2c-4bff-8c23-3d28f323ab21"}, "title": "new versions of bedToBigBed fail to convert layered BED files", "component": null, "votes": 0, "watches": 1, "content": {"raw": "I haven't had a lot of time to track down the issue here, and to fix we currently just use the old version specifically for converting layered BED files created by segway. AFAICT the bigBed files created with the old version are rendered fine in the current browser.\r\n\r\n``` bash\r\n# using ucsc v308\r\njhessel@amc-tesla ~/tmp/segway-identify\r\n$ bedToBigBed segway.layered.bed ~/ref/genomes/hg19/hg19.chrom.sizes segway.layered.bb\r\npass1 - making usageList (25 chroms): 921 millis\r\nError line 20 of segway.layered.bed: BED blocks must be in ascending order without overlap. Blocks 0 and 1 overlap.\r\n```\r\n\r\n``` bash\r\n# using ucsc v130\r\njhessel@amc-tesla ~/tmp/segway-identify\r\n$ bedToBigBed segway.layered.bed ~/ref/genomes/hg19/hg19.chrom.sizes segway.layered.bb\r\npass1 - making usageList (25 chroms): 406 millis\r\npass2 - checking and writing primary data (1070 records, 12 fields): 43990 millis\r\nindex write: 0 millis\r\npass3 - writeReducedOnceReturnReducedTwice: 380 millis\r\nfurther reductions: 0 millis\r\n```", "markup": "markdown", "html": "<p>I haven't had a lot of time to track down the issue here, and to fix we currently just use the old version specifically for converting layered BED files created by segway. AFAICT the bigBed files created with the old version are rendered fine in the current browser.</p>\n<div class=\"codehilite language-bash\"><pre><span></span><span class=\"c1\"># using ucsc v308</span>\njhessel@amc-tesla ~/tmp/segway-identify\n$ bedToBigBed segway.layered.bed ~/ref/genomes/hg19/hg19.chrom.sizes segway.layered.bb\npass1 - making usageList <span class=\"o\">(</span><span class=\"m\">25</span> chroms<span class=\"o\">)</span>: <span class=\"m\">921</span> millis\nError line <span class=\"m\">20</span> of segway.layered.bed: BED blocks must be in ascending order without overlap. Blocks <span class=\"m\">0</span> and <span class=\"m\">1</span> overlap.\n</pre></div>\n\n\n<div class=\"codehilite language-bash\"><pre><span></span><span class=\"c1\"># using ucsc v130</span>\njhessel@amc-tesla ~/tmp/segway-identify\n$ bedToBigBed segway.layered.bed ~/ref/genomes/hg19/hg19.chrom.sizes segway.layered.bb\npass1 - making usageList <span class=\"o\">(</span><span class=\"m\">25</span> chroms<span class=\"o\">)</span>: <span class=\"m\">406</span> millis\npass2 - checking and writing primary data <span class=\"o\">(</span><span class=\"m\">1070</span> records, <span class=\"m\">12</span> fields<span class=\"o\">)</span>: <span class=\"m\">43990</span> millis\nindex write: <span class=\"m\">0</span> millis\npass3 - writeReducedOnceReturnReducedTwice: <span class=\"m\">380</span> millis\nfurther reductions: <span class=\"m\">0</span> millis\n</pre></div>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2016-05-25T16:47:51.061931+00:00", "milestone": null, "updated_on": "2016-08-08T19:39:51.193517+00:00", "type": "issue", "id": 66}