{"priority": "minor", "kind": "enhancement", "repository": {"links": {"self": {"href": "data/repositories/hoffmanlab/segway.json"}, "html": {"href": "#!/hoffmanlab/segway"}, "avatar": {"href": "data/bytebucket.org/ravatar/{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}ts=python"}}, "type": "repository", "name": "segway", "full_name": "hoffmanlab/segway", "uuid": "{68bf38bf-f0c1-4c9c-909e-0ee4b2c26257}"}, "links": {"attachments": {"href": "data/repositories/hoffmanlab/segway/issues/26/attachments_page=1.json"}, "self": {"href": "data/repositories/hoffmanlab/segway/issues/26.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/hoffmanlab/segway/issues/26/watch"}, "comments": {"href": "data/repositories/hoffmanlab/segway/issues/26/comments_page=1.json"}, "html": {"href": "#!/hoffmanlab/segway/issues/26/better-error-message-when-dealing-with"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/hoffmanlab/segway/issues/26/vote"}}, "reporter": {"display_name": "Eric Roberts", "uuid": "{cd8c1fe0-28ca-45fb-8ef9-48090b42bb80}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D"}, "html": {"href": "https://bitbucket.org/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/17548d71dfb29d015b880f48cfc01ca3d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsER-5.png"}}, "nickname": "ericr86", "type": "user", "account_id": "557058:c80ca578-03a1-4ac6-b3ee-50372a3fceee"}, "title": "Better error message when dealing with improper genomedata archives", "component": null, "votes": 0, "watches": 1, "content": {"raw": "Currently segway does not print out a helpful error message when there's something wrong with a genomedata archive. Most commonly when the archive is created with a datatrack that has 0 data points in it.\r\n\r\nCommonly this is reported:\r\n```\r\n/usr/lib/python2.6/site-packages/segway/structure.py:90: RuntimeWarning: invalid value encountered in long_scalars\r\n\r\n  / num_datapoints_track, MAX_WEIGHT_SCALE)\r\n\r\nParse Error in file 'traintest/segway.str': expecting integer or floating-point value at or before line 44, near (-)\r\n\r\nExiting Program\r\n\r\nTraceback (most recent call last):\r\n\r\n  File \"/usr/bin/segway\", line 9, in <module>\r\n\r\n    load_entry_point('segway==1.2', 'console_scripts', 'segway')()\r\n\r\n  File \"/usr/lib/python2.6/site-packages/segway/run.py\", line 2545, in main\r\n\r\n    return runner()\r\n\r\n  File \"/usr/lib/python2.6/site-packages/segway/run.py\", line 2367, in __call__\r\n\r\n    self.run(*args, **kwargs)\r\n\r\n  File \"/usr/lib/python2.6/site-packages/segway/run.py\", line 2337, in run\r\n\r\n    self.run_triangulate()\r\n\r\n  File \"/usr/lib/python2.6/site-packages/segway/run.py\", line 1765, in run_triangulate\r\n\r\n    self.run_triangulate_single(num_segs)\r\n\r\n  File \"/usr/lib/python2.6/site-packages/segway/run.py\", line 1761, in run_triangulate_single\r\n\r\n    prog(**kwargs)\r\n\r\n  File \"/usr/lib/python2.6/site-packages/optbuild.py\", line 81, in __call__\r\n\r\n    return self.run(*args, **kwargs)\r\n\r\n  File \"/usr/lib/python2.6/site-packages/optbuild.py\", line 212, in run\r\n\r\n    self._getoutput(args, kwargs)\r\n\r\n  File \"/usr/lib/python2.6/site-packages/optbuild.py\", line 194, in _getoutput\r\n\r\n    stdin, stdout, stderr, cwd)\r\n\r\n  File \"/usr/lib/python2.6/site-packages/optbuild.py\", line 157, in _popen\r\n\r\n    _returncode_error_factory(cmdline, returncode, output, error)\r\n\r\n  File \"/usr/lib/python2.6/site-packages/optbuild.py\", line 57, in _returncode_error_factory\r\n\r\n    raise error_cls, (cmdline, returncode, output, error)\r\n\r\noptbuild.ReturncodeError: /usr/local/bin/gmtkTriangulate returned 1\r\n```\r\n\r\nA better error message stating the problem should be reported to the user.\r\nThe error can be reproduced with the attached archive.", "markup": "markdown", "html": "<p>Currently segway does not print out a helpful error message when there's something wrong with a genomedata archive. Most commonly when the archive is created with a datatrack that has 0 data points in it.</p>\n<p>Commonly this is reported:</p>\n<div class=\"codehilite\"><pre><span></span>/usr/lib/python2.6/site-packages/segway/structure.py:90: RuntimeWarning: invalid value encountered in long_scalars\n\n  / num_datapoints_track, MAX_WEIGHT_SCALE)\n\nParse Error in file &#39;traintest/segway.str&#39;: expecting integer or floating-point value at or before line 44, near (-)\n\nExiting Program\n\nTraceback (most recent call last):\n\n  File &quot;/usr/bin/segway&quot;, line 9, in &lt;module&gt;\n\n    load_entry_point(&#39;segway==1.2&#39;, &#39;console_scripts&#39;, &#39;segway&#39;)()\n\n  File &quot;/usr/lib/python2.6/site-packages/segway/run.py&quot;, line 2545, in main\n\n    return runner()\n\n  File &quot;/usr/lib/python2.6/site-packages/segway/run.py&quot;, line 2367, in __call__\n\n    self.run(*args, **kwargs)\n\n  File &quot;/usr/lib/python2.6/site-packages/segway/run.py&quot;, line 2337, in run\n\n    self.run_triangulate()\n\n  File &quot;/usr/lib/python2.6/site-packages/segway/run.py&quot;, line 1765, in run_triangulate\n\n    self.run_triangulate_single(num_segs)\n\n  File &quot;/usr/lib/python2.6/site-packages/segway/run.py&quot;, line 1761, in run_triangulate_single\n\n    prog(**kwargs)\n\n  File &quot;/usr/lib/python2.6/site-packages/optbuild.py&quot;, line 81, in __call__\n\n    return self.run(*args, **kwargs)\n\n  File &quot;/usr/lib/python2.6/site-packages/optbuild.py&quot;, line 212, in run\n\n    self._getoutput(args, kwargs)\n\n  File &quot;/usr/lib/python2.6/site-packages/optbuild.py&quot;, line 194, in _getoutput\n\n    stdin, stdout, stderr, cwd)\n\n  File &quot;/usr/lib/python2.6/site-packages/optbuild.py&quot;, line 157, in _popen\n\n    _returncode_error_factory(cmdline, returncode, output, error)\n\n  File &quot;/usr/lib/python2.6/site-packages/optbuild.py&quot;, line 57, in _returncode_error_factory\n\n    raise error_cls, (cmdline, returncode, output, error)\n\noptbuild.ReturncodeError: /usr/local/bin/gmtkTriangulate returned 1\n</pre></div>\n\n\n<p>A better error message stating the problem should be reported to the user.\nThe error can be reproduced with the attached archive.</p>", "type": "rendered"}, "assignee": {"display_name": "Eric Roberts", "uuid": "{cd8c1fe0-28ca-45fb-8ef9-48090b42bb80}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D"}, "html": {"href": "https://bitbucket.org/%7Bcd8c1fe0-28ca-45fb-8ef9-48090b42bb80%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/17548d71dfb29d015b880f48cfc01ca3d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsER-5.png"}}, "nickname": "ericr86", "type": "user", "account_id": "557058:c80ca578-03a1-4ac6-b3ee-50372a3fceee"}, "state": "new", "version": null, "edited_on": null, "created_on": "2014-11-14T14:30:27.594106+00:00", "milestone": null, "updated_on": "2014-11-14T14:30:27.594106+00:00", "type": "issue", "id": 26}